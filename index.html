<!doctype html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






  

<link href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Java, Python and Life" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="PatrickPhang">
<meta property="og:type" content="website">
<meta property="og:title" content="Patrick's Blog">
<meta property="og:url" content="https://patrickphang.github.io/index.html">
<meta property="og:site_name" content="Patrick's Blog">
<meta property="og:description" content="PatrickPhang">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Patrick's Blog">
<meta name="twitter:description" content="PatrickPhang">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: 'LPQO9XHTI4',
      apiKey: 'd92a5dbb6c543d1a0a6b4400ca628dad',
      indexName: 'indexName',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://patrickphang.github.io/"/>





  <title> Patrick's Blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta custom-logo">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Patrick's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Love Coding, Enjoy Life</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-guestbook">
          <a href="/guestbook" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-users"></i> <br />
            
            留言
          </a>
        </li>
      
        
        <li class="menu-item menu-item-havefun">
          <a href="/havefun" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-battery-full"></i> <br />
            
            放松一下
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  
  <div class="algolia-popup popup search-popup">
    <div class="algolia-search">
      <div class="algolia-search-input-icon">
        <i class="fa fa-search"></i>
      </div>
      <div class="algolia-search-input" id="algolia-search-input"></div>
    </div>

    <div class="algolia-results">
      <div id="algolia-stats"></div>
      <div id="algolia-hits"></div>
      <div id="algolia-pagination" class="algolia-pagination"></div>
    </div>

    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
  </div>




    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://patrickphang.github.io/2017/02/12/jQuery/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Patrick Phang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/casillas.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Patrick's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/02/12/jQuery/" itemprop="url">
                  jQuery
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-02-12T18:36:58+08:00">
                2017-02-12
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JavaWeb/" itemprop="url" rel="index">
                    <span itemprop="name">JavaWeb</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/02/12/jQuery/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/02/12/jQuery/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2017/02/12/jQuery/" class="leancloud_visitors" data-flag-title="jQuery">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="jQuery-只有一个对象-（jQuery-）-一定要搞清楚jQuery-与dom-对象之间的区别于联系"><a href="#jQuery-只有一个对象-（jQuery-）-一定要搞清楚jQuery-与dom-对象之间的区别于联系" class="headerlink" title="jQuery 只有一个对象 （jQuery == $） 一定要搞清楚jQuery 与dom 对象之间的区别于联系"></a>jQuery 只有一个对象 （jQuery == $） 一定要搞清楚jQuery 与dom 对象之间的区别于联系</h1><pre><code>dom对象：dom 对象 是浏览器自带对象，dom 对象只能调用dom 里面的属性和方法，
不能调用jQuery 对象里面的属性和方法

jQuery对象：jquery 对象是通过jQuery 包装页面上面的元素或者dom
而产生的一个新的 对象，jquery 对象时jQuery 独有的，不能调用dom
对象里面的属性和方法，jQuery 对象是一个数组。

jQuery 对象与dom 对象时可以相互转换的，转换之后它们就可以相互调用了
</code></pre><h2 id="三种方式"><a href="#三种方式" class="headerlink" title="三种方式"></a>三种方式</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">$(document).ready(function()&#123;</div><div class="line">    $("#dombutton").click();</div><div class="line">&#125;);</div><div class="line"></div><div class="line">$(document).ready(function()&#123;</div><div class="line">    $("#dombutton").click();</div><div class="line">&#125;);</div><div class="line"></div><div class="line">jQuery().ready(function()&#123;</div><div class="line">    $("#dombutton").click();</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="DOM转换成jQuery对象"><a href="#DOM转换成jQuery对象" class="headerlink" title="DOM转换成jQuery对象"></a>DOM转换成jQuery对象</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">//DOM获取</div><div class="line">var username = document.getElementById(&quot;username&quot;);</div><div class="line">alert(username.value);</div><div class="line"></div><div class="line">//DOM对象转换成jQuery对象:$(DOM对象)</div><div class="line">var $username = $(username);</div><div class="line">alert($username.val());</div></pre></td></tr></table></figure>
<h2 id="jQuery对象转换成DOM对象"><a href="#jQuery对象转换成DOM对象" class="headerlink" title="jQuery对象转换成DOM对象"></a>jQuery对象转换成DOM对象</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">//jQuery获取(定义jQuery变量,在其前面增加&quot;$&quot;.不加是可以的,但是不建议)</div><div class="line">var $username = $(&quot;#username&quot;);</div><div class="line"></div><div class="line">//jQuery对象转换成DOM对象</div><div class="line">//1 jQuery对象是一个数组对象</div><div class="line">var username = $username[0];</div><div class="line">alert(username.value);</div><div class="line"></div><div class="line">//2 jQuery提供了get(index)方法</div><div class="line">var username = $username.get(0);</div><div class="line">alert(username.value);</div></pre></td></tr></table></figure>
<p>$()：方法调用，根据正则去匹配</p>
<h1 id="选择器"><a href="#选择器" class="headerlink" title="选择器"></a>选择器</h1><h2 id="基本选择器"><a href="#基本选择器" class="headerlink" title="基本选择器"></a>基本选择器</h2><p><code>#one</code>：id为one的元素<br><code>.mini</code>：class为mini的元素<br><code>div</code>：元素名为div的元素<br><code>*</code>：所有元素<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="comment">//&lt;input type="button" value="选择 id为 one 的元素." id="btn1"/&gt; </span></div><div class="line">    $(<span class="string">"#btn1"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        $(<span class="string">"#one"</span>).css(<span class="string">"background"</span>,<span class="string">"red"</span>);   </div><div class="line">    &#125;);</div><div class="line">    </div><div class="line">    <span class="comment">//&lt;input type="button" value="选择 class 为 mini 的所有元素." id="btn2"/&gt;</span></div><div class="line">    $(<span class="string">"#btn2"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;   </div><div class="line">        $(<span class="string">".mini"</span>).css(<span class="string">"background"</span>,<span class="string">"yellow"</span>);</div><div class="line">    &#125;);</div><div class="line">    </div><div class="line">    <span class="comment">//&lt;input type="button" value="选择 元素名是 div 的所有元素." id="btn3"/&gt;</span></div><div class="line">    $(<span class="string">"#btn3"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;   </div><div class="line">        $(<span class="string">"div"</span>).css(<span class="string">"background"</span>,<span class="string">"green"</span>);</div><div class="line">    &#125;);</div><div class="line">    </div><div class="line">    <span class="comment">//&lt;input type="button" value="选择 所有的元素." id="btn4"/&gt;</span></div><div class="line">    $(<span class="string">"#btn4"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        $(<span class="string">"*"</span>).css(<span class="string">"background"</span>,<span class="string">"blue"</span>);   </div><div class="line">    &#125;);</div><div class="line">    </div><div class="line">    <span class="comment">//&lt;input type="button" value="选择 所有的span元素和id为two的元素." id="btn5"/&gt;</span></div><div class="line">    $(<span class="string">"#btn5"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="comment">//组合选择器..</span></div><div class="line">        $(<span class="string">"span,#two"</span>).css(<span class="string">"background"</span>,<span class="string">"blue"</span>);       </div><div class="line">    &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<h2 id="层级选择器-只有当前的这个方法返回的是jQuery对象才能进行链式操作"><a href="#层级选择器-只有当前的这个方法返回的是jQuery对象才能进行链式操作" class="headerlink" title="层级选择器(只有当前的这个方法返回的是jQuery对象才能进行链式操作)"></a>层级选择器(只有当前的这个方法返回的是jQuery对象才能进行链式操作)</h2><p><code>body div</code>：body内的所有div元素<br><code>body&gt;div</code>：在body内,选择子元素是div的<br><code>#one+div</code>：id为one 的下一个div元素<br><code>#two~div</code>：id为two的元素后面的所有div兄弟元素（只有它后面的）<br><code>$(&quot;#two&quot;).siblings(&quot;div&quot;)</code>：id为two的元素的所有div兄弟元素（前面后面都包括）</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="comment">//&lt;input type="button" value="选择 body内的所有div元素." id="btn1"/&gt;</span></div><div class="line">        $(<span class="string">"#btn1"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            $(<span class="string">"body div"</span>).css(<span class="string">"background"</span>,<span class="string">"blue"</span>);               </div><div class="line">        &#125;);</div><div class="line">        </div><div class="line">        <span class="comment">//&lt;input type="button" value="在body内,选择子元素是div的。" id="btn2"/&gt;</span></div><div class="line">        $(<span class="string">"#btn2"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            $(<span class="string">"body&gt;div"</span>).css(<span class="string">"background"</span>,<span class="string">"blue"</span>);</div><div class="line">        &#125;);</div><div class="line">        </div><div class="line">        <span class="comment">//&lt;input type="button" value="选择 id为one 的下一个div元素." id="btn3"/&gt;</span></div><div class="line">        $(<span class="string">"#btn3"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            $(<span class="string">"#one+div"</span>).css(<span class="string">"background"</span>,<span class="string">"blue"</span>);</div><div class="line">        &#125;);</div><div class="line">        </div><div class="line">        <span class="comment">//&lt;input type="button" value="选择 id为two的元素后面的所有div兄弟元素." id="btn4"/&gt;</span></div><div class="line">        $(<span class="string">"#btn4"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            $(<span class="string">"#two~div"</span>).css(<span class="string">"background"</span>,<span class="string">"blue"</span>);</div><div class="line">        &#125;);</div><div class="line">        </div><div class="line">        <span class="comment">//&lt;input type="button" value="选择 id为two的元素的所有div兄弟元素." id="btn5"/&gt;</span></div><div class="line">        $(<span class="string">"#btn5"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            <span class="comment">//只有当前的这个方法返回的是jQuery 对象才能进行链式操作...</span></div><div class="line">            $(<span class="string">"#two"</span>).siblings(<span class="string">"div"</span>).css(<span class="string">"background"</span>,<span class="string">"blue"</span>);          </div><div class="line">        &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="基本过滤选择器"><a href="#基本过滤选择器" class="headerlink" title="基本过滤选择器"></a>基本过滤选择器</h2><p>找到一堆页面元素，我们可以对这些元素加过滤条件，找到我们想要的这些元素，然后进行操作<br>过滤条件前面添加 : 符号<br><code>div:first</code>：第一个div元素<br><code>div:last</code>：最后一个div元素<br><code>div:not(&#39;.one&#39;)</code>：class不为one的所有div元素<br><code>div:even</code>：索引值为偶数的div元素<br><code>div:odd</code>：索引值为奇数的div元素<br><code>div:eq(3)</code>：索引值等于3的元素<br><code>div:gt(3)</code>：索引值大于3的元素<br><code>div:lt(3)</code>：索引值小于3的元素<br><code>:header</code>：所有的标题元素<br><code>:animated</code>：当前正在执行动画的所有元素</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="comment">//&lt;input type="button" value="选择第一个div元素." id="btn1"/&gt;</span></div><div class="line">        $(<span class="string">"#btn1"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;	  	</div><div class="line">            $(<span class="string">"div:first"</span>).css(<span class="string">"background"</span>,<span class="string">"red"</span>);</div><div class="line">        &#125;);</div><div class="line">        </div><div class="line">        <span class="comment">//&lt;input type="button" value="选择最后一个div元素." id="btn2"/&gt;</span></div><div class="line">        $(<span class="string">"#btn2"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;	  	</div><div class="line">            $(<span class="string">"div:last"</span>).css(<span class="string">"background"</span>,<span class="string">"green"</span>);</div><div class="line">        &#125;);</div><div class="line">        </div><div class="line">        <span class="comment">//&lt;input type="button" value="选择class不为one的 所有div元素." id="btn3"/&gt;</span></div><div class="line">        $(<span class="string">"#btn3"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;		  	</div><div class="line">            $(<span class="string">"div:not('.one')"</span>).css(<span class="string">"background"</span>,<span class="string">"green"</span>);</div><div class="line">        &#125;);</div><div class="line">        </div><div class="line">        <span class="comment">//&lt;input type="button" value="选择索引值为偶数 的div元素." id="btn4"/&gt;</span></div><div class="line">        $(<span class="string">"#btn4"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            $(<span class="string">"div:even"</span>).css(<span class="string">"background"</span>,<span class="string">"green"</span>);</div><div class="line">        &#125;);</div><div class="line">        </div><div class="line">        <span class="comment">//&lt;input type="button" value="选择索引值为奇数 的div元素." id="btn5"/&gt;</span></div><div class="line">        $(<span class="string">"#btn5"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            $(<span class="string">"div:odd"</span>).css(<span class="string">"background"</span>,<span class="string">"green"</span>);</div><div class="line">        &#125;);</div><div class="line">        </div><div class="line">        <span class="comment">//&lt;input type="button" value="选择索引值等于3的元素." id="btn6"/&gt;</span></div><div class="line">        $(<span class="string">"#btn6"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            $(<span class="string">"div:eq(3)"</span>).css(<span class="string">"background"</span>,<span class="string">"green"</span>);		  	</div><div class="line">        &#125;);</div><div class="line">        </div><div class="line">        <span class="comment">//&lt;input type="button" value="选择索引值大于3的元素." id="btn7"/&gt;</span></div><div class="line">        $(<span class="string">"#btn7"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            $(<span class="string">"div:gt(3)"</span>).css(<span class="string">"background"</span>,<span class="string">"green"</span>);</div><div class="line">        &#125;);</div><div class="line">        </div><div class="line">        <span class="comment">//&lt;input type="button" value="选择索引值小于3的元素." id="btn8"/&gt;</span></div><div class="line">        $(<span class="string">"#btn8"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            $(<span class="string">"div:lt(3)"</span>).css(<span class="string">"background"</span>,<span class="string">"red"</span>);</div><div class="line">        &#125;);</div><div class="line">        </div><div class="line">        <span class="comment">//&lt;input type="button" value="选择所有的标题元素." id="btn9"/&gt;</span></div><div class="line">        $(<span class="string">"#btn9"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            $(<span class="string">":header"</span>).css(<span class="string">"background"</span>,<span class="string">"red"</span>);</div><div class="line">        &#125;);</div><div class="line">        </div><div class="line">        <span class="comment">//&lt;input type="button" value="选择当前正在执行动画的所有元素." id="btn10"/&gt;</span></div><div class="line">        <span class="function"><span class="keyword">function</span> <span class="title">move</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            $(<span class="string">"#mover"</span>).slideToggle(<span class="string">"slow"</span>,move);</div><div class="line">        &#125;</div><div class="line">        move();</div><div class="line">        </div><div class="line">        $(<span class="string">"#btn10"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;				</div><div class="line">            $(<span class="string">":animated"</span>).css(<span class="string">"background"</span>,<span class="string">"red"</span>);</div><div class="line">        &#125;);	  </div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="内容过滤选择器"><a href="#内容过滤选择器" class="headerlink" title="内容过滤选择器"></a>内容过滤选择器</h2><p><code>div:contains(&#39;di&#39;)</code>：含有文本“di”的div元素<br><code>div:empty</code>：不包含子元素(或者文本元素)的div空元素<br><code>div:has(&#39;.mini&#39;)</code>：含有class为mini元素的div元素<br><code>div:parent</code>：含有子元素(或者文本元素)的div元素</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="comment">//&lt;input type="button" value="选取含有文本“di”的div元素." id="btn1"/&gt;</span></div><div class="line">        $(<span class="string">"#btn1"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            $(<span class="string">"div:contains('di')"</span>).css(<span class="string">"background"</span>,<span class="string">"red"</span>);</div><div class="line">        &#125;);</div><div class="line">        </div><div class="line">        <span class="comment">//&lt;input type="button" value="选取不包含子元素(或者文本元素)的div空元素." id="btn2"/&gt;</span></div><div class="line">        $(<span class="string">"#btn2"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">                $(<span class="string">"div:empty"</span>).css(<span class="string">"background"</span>,<span class="string">"red"</span>);</div><div class="line">        &#125;);</div><div class="line">        </div><div class="line">        <span class="comment">//&lt;input type="button" value="选取&lt;含有!&gt;class为mini元素的div元素." id="btn3"/&gt;</span></div><div class="line">        $(<span class="string">"#btn3"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            $(<span class="string">"div:has('.mini')"</span>).css(<span class="string">"background"</span>,<span class="string">"red"</span>);		  	</div><div class="line">        &#125;);</div><div class="line">        </div><div class="line">        <span class="comment">//&lt;input type="button" value="选取含有子元素(或者文本元素)的div元素." id="btn4"/&gt;</span></div><div class="line">        $(<span class="string">"#btn4"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            $(<span class="string">"div:parent"</span>).css(<span class="string">"background"</span>,<span class="string">"red"</span>);		  		</div><div class="line">        &#125;);		  </div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="可见性过滤选择器"><a href="#可见性过滤选择器" class="headerlink" title="可见性过滤选择器"></a>可见性过滤选择器</h2><p><code>div:visible</code>：所有可见的div元素<br><code>div:hidden</code>：所有不可见的div元素<br><code>input:hidden</code>：选取所有的文本隐藏域, 并打印它们的值<br><code>#onediv&gt;div</code>：选取onediv所有的div的, 并打印它们的值</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="comment">//&lt;input type="button" value=" 选取所有可见的div元素"  id="b1"/&gt;</span></div><div class="line">        $(<span class="string">"#b1"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">                $(<span class="string">"div:visible"</span>).css(<span class="string">"background"</span>,<span class="string">"red"</span>);</div><div class="line">        &#125;);</div><div class="line">        </div><div class="line">        <span class="comment">//&lt;input type="button" value=" 选取所有不可见的元素, 利用 jQuery 中的 show() 方法将它们显示出来"  id="b2"/&gt;</span></div><div class="line">        $(<span class="string">"#b2"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            $(<span class="string">"div:hidden"</span>).css(<span class="string">"background"</span>,<span class="string">"red"</span>).show(<span class="number">2000</span>);</div><div class="line">        &#125;);</div><div class="line">        </div><div class="line">        <span class="comment">//&lt;input type="button" value=" 选取所有的文本隐藏域, 并打印它们的值"  id="b3"/&gt;</span></div><div class="line">        $(<span class="string">"#b3"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">                <span class="comment">//  &lt;!--文本隐藏域--&gt;</span></div><div class="line">			<span class="comment">//	 &lt;input type="hidden" value="hidden_1"&gt;</span></div><div class="line">			<span class="comment">//	 &lt;input type="hidden" value="hidden_2"&gt;</span></div><div class="line">			<span class="comment">//	 &lt;input type="hidden" value="hidden_3"&gt;</span></div><div class="line">			<span class="comment">//	 &lt;input type="hidden" value="hidden_4"&gt;</span></div><div class="line"></div><div class="line">            <span class="comment">//var $input=$("input:hidden");</span></div><div class="line">                </div><div class="line">            <span class="comment">//首先我们通过dom来遍历...</span></div><div class="line">            <span class="comment">//1.显示迭代</span></div><div class="line">			<span class="comment">//	for(var i=0;i&lt;$input.length;i++)&#123;</span></div><div class="line">			<span class="comment">//		alert($input[i].value);</span></div><div class="line">			<span class="comment">//	&#125;</span></div><div class="line">            <span class="comment">//2.隐式迭代</span></div><div class="line">            $(<span class="string">"input:hidden"</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params">index,dom</span>)</span>&#123;</div><div class="line">                    <span class="comment">//alert(index);</span></div><div class="line">                    <span class="comment">//alert(dom.value);					</span></div><div class="line">            &#125;)			</div><div class="line">        &#125;);</div><div class="line">        </div><div class="line">        <span class="comment">//&lt;input type="button" value=" 选取onediv所有的div的, 并打印它们的值"  id="b4"/&gt;</span></div><div class="line">        $(<span class="string">"#b4"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            $(<span class="string">"#onediv&gt;div"</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params">index,dom</span>)</span>&#123;			   	</div><div class="line">                alert($(dom).text());</div><div class="line">            &#125;)			</div><div class="line">        &#125;);		  </div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="属性过滤选择器"><a href="#属性过滤选择器" class="headerlink" title="属性过滤选择器"></a>属性过滤选择器</h2><p><code>div[title]</code>：含有属性title的div元素<br><code>div[title=test]</code>：属性title值等于“test”的div元素<br><code>div[title!=test]</code>：属性title值不等于“test”的div元素(没有属性title的也将被选中)<br><code>div[title^=te]</code>：属性title值以“te”开始的div元素<br><code>div[title$=est]</code>：属性title值以“est”结束的div元素<br><code>div[title*=es]</code>：属性title值 含有“es”的div元素<br><code>div[id][title*=es]</code>：组合属性选择器,首先选取有属性id的div元素，然后在结果中选取属性title值含有“es”的元素</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="comment">//&lt;input type="button" value="选取含有 属性title 的div元素." id="btn1"/&gt;</span></div><div class="line">        $(<span class="string">"#btn1"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            $(<span class="string">"div[title]"</span>).css(<span class="string">"background"</span>,<span class="string">"red"</span>);</div><div class="line">            </div><div class="line">        &#125;);</div><div class="line">        </div><div class="line">        <span class="comment">//&lt;input type="button" value="选取 属性title值等于“test”的div元素." id="btn2"/&gt;</span></div><div class="line">        $(<span class="string">"#btn2"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            $(<span class="string">"div[title=test]"</span>).css(<span class="string">"background"</span>,<span class="string">"red"</span>);</div><div class="line">        &#125;);</div><div class="line">        </div><div class="line">        <span class="comment">//&lt;input type="button" value="选取 属性title值不等于“test”的div元素(没有属性title的也将被选中)." id="btn3"/&gt;</span></div><div class="line">        $(<span class="string">"#btn3"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">                $(<span class="string">"div[title!=test]"</span>).css(<span class="string">"background"</span>,<span class="string">"red"</span>);</div><div class="line">        &#125;);</div><div class="line">        </div><div class="line">        <span class="comment">//&lt;input type="button" value="选取 属性title值 以“te”开始 的div元素." id="btn4"/&gt;</span></div><div class="line">        $(<span class="string">"#btn4"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">                $(<span class="string">"div[title^=te]"</span>).css(<span class="string">"background"</span>,<span class="string">"red"</span>);</div><div class="line">        &#125;);</div><div class="line">        </div><div class="line">        <span class="comment">//&lt;input type="button" value="选取 属性title值 以“est”结束 的div元素." id="btn5"/&gt;</span></div><div class="line">        $(<span class="string">"#btn5"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">                $(<span class="string">"div[title$=est]"</span>).css(<span class="string">"background"</span>,<span class="string">"red"</span>);</div><div class="line">        &#125;);</div><div class="line">        </div><div class="line">        <span class="comment">//&lt;input type="button" value="选取 属性title值 含有“es”的div元素." id="btn6"/&gt;</span></div><div class="line">        $(<span class="string">"#btn6"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            $(<span class="string">"div[title*=es]"</span>).css(<span class="string">"background"</span>,<span class="string">"red"</span>);</div><div class="line">        &#125;);</div><div class="line">        </div><div class="line">        <span class="comment">//&lt;input type="button" value="组合属性选择器,首先选取有属性id的div元素，然后在结果中 选取属性title值 含有“es”的元素." id="btn7"/&gt;</span></div><div class="line">        $(<span class="string">"#btn7"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            $(<span class="string">"div[id][title*=es]"</span>).css(<span class="string">"background"</span>,<span class="string">"red"</span>);</div><div class="line">        &#125;);       </div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="子元素过滤选择器"><a href="#子元素过滤选择器" class="headerlink" title="子元素过滤选择器"></a>子元素过滤选择器</h2><p>冒号前一定要加空格<br><code>div[class=one] :nth-child(2)</code>：选取每个class为one的div,父元素下的第2个子元素<br><code>div[class=one] :first-child</code>：选取每个class为one的div, 父元素下的第一个子元素<br><code>div[class=one] :last-child</code>：选取每个class为one的div父元素下的最后一个子元素<br><code>div[class=one] :only-child</code>：如果class为one的div父元素下的仅仅只有一个子元素，那么选中这个子元素</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="comment">//&lt;input type="button" value="选取每个class为one的div,父元素下的第2个子元素." id="btn1"/&gt;</span></div><div class="line">        $(<span class="string">"#btn1"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;      </div><div class="line">                <span class="comment">//子元素过滤选择器特殊写法，: 前面加空格...  从1开始计算...</span></div><div class="line">                $(<span class="string">"div[class=one] :nth-child(2)"</span>).css(<span class="string">"background"</span>,<span class="string">"red"</span>);</div><div class="line">        &#125;);</div><div class="line">        </div><div class="line">        <span class="comment">//&lt;input type="button" value="选取每个class为one的div, 父元素下的第一个子元素." id="btn2"/&gt;</span></div><div class="line">        $(<span class="string">"#btn2"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            <span class="comment">//第一种写法</span></div><div class="line">            <span class="comment">//$("div[class=one] :nth-child(1)").css("background","red");</span></div><div class="line">            <span class="comment">//第二种写法..</span></div><div class="line">            $(<span class="string">"div[class=one] :first-child"</span>).css(<span class="string">"background"</span>,<span class="string">"red"</span>);</div><div class="line">        &#125;);</div><div class="line">        </div><div class="line">        <span class="comment">//&lt;input type="button" value="选取每个class为one的div父元素下的最后一个子元素." id="btn3"/&gt;</span></div><div class="line">        $(<span class="string">"#btn3"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;        </div><div class="line">                $(<span class="string">"div[class=one] :last-child"</span>).css(<span class="string">"background"</span>,<span class="string">"red"</span>);</div><div class="line">        &#125;);</div><div class="line">        </div><div class="line">        <span class="comment">//&lt;input type="button" value="如果class为one的div父元素下的仅仅只有一个子元素，那么选中这个子元素." id="btn4"/&gt;</span></div><div class="line">        $(<span class="string">"#btn4"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            $(<span class="string">"div[class=one] :only-child"</span>).css(<span class="string">"background"</span>,<span class="string">"red"</span>);</div><div class="line">        &#125;);       </div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="表单对象属性过滤选择器"><a href="#表单对象属性过滤选择器" class="headerlink" title="表单对象属性过滤选择器"></a>表单对象属性过滤选择器</h2><p><code>$(&quot;input:enabled&quot;).val(&quot;&quot;);</code>：对表单内可用input赋值操作<br><code>$(&quot;input:disabled&quot;).val(&quot;卢雨&quot;);</code>：对表单内不可用input赋值操作<br><code>$(&quot;input:checked&quot;).size()</code>：获取多选框选中的个数<br><code>$(&quot;select&gt;option:selected&quot;).each()</code>：获取下拉框选中的内容  </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="comment">//&lt;button id="btn1"&gt;对表单内 可用input 赋值操作.&lt;/button&gt;</span></div><div class="line">        $(<span class="string">"#btn1"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            $(<span class="string">"input:enabled"</span>).val(<span class="string">"卢雨"</span>);</div><div class="line">        &#125;);</div><div class="line">        </div><div class="line">        <span class="comment">//&lt;button id="btn2"&gt;对表单内 不可用input 赋值操作.&lt;/button&gt;</span></div><div class="line">        $(<span class="string">"#btn2"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            $(<span class="string">"input:disabled"</span>).val(<span class="string">"卢雨"</span>);</div><div class="line">        &#125;);</div><div class="line">        </div><div class="line">        <span class="comment">//&lt;button id="btn3"&gt;获取多选框选中的个数.&lt;/button&gt;</span></div><div class="line">        $(<span class="string">"#btn3"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            alert($(<span class="string">"input:checked"</span>).size());</div><div class="line">        &#125;);</div><div class="line">        </div><div class="line">        <span class="comment">//&lt;button id="btn4"&gt;获取下拉框选中的内容.&lt;/button&gt;</span></div><div class="line">        $(<span class="string">"#btn4"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            <span class="comment">//alert($("select&gt;option:selected").length);           </span></div><div class="line">            $(<span class="string">"select&gt;option:selected"</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params">index,dom</span>)</span>&#123;</div><div class="line">                    <span class="comment">//alert($(dom).text());</span></div><div class="line">                    <span class="keyword">var</span> title=$(dom).attr(<span class="string">"title"</span>);</div><div class="line">                    alert(title);						</div><div class="line">            &#125;)			</div><div class="line">        &#125;);		  </div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="表单属性过滤选择器"><a href="#表单属性过滤选择器" class="headerlink" title="表单属性过滤选择器"></a>表单属性过滤选择器</h2><p><code>var $alltext = $(&quot;#form1 :text&quot;);</code>：拿到表单下的文本框<br><code>var $allpassword= $(&quot;#form1 :password&quot;);</code>：拿到表单下的密码<br><code>var $allradio= $(&quot;#form1 :radio&quot;);</code>：<br><code>var $allcheckbox= $(&quot;#form1 :checkbox&quot;);</code>：</p>
<p><code>var $allsubmit= $(&quot;#form1 :submit&quot;);</code>：<br><code>var $allimage= $(&quot;#form1 :image&quot;);</code>：<br><code>var $allreset= $(&quot;#form1 :reset&quot;);</code>：<br><code>var $allbutton= $(&quot;#form1 :button&quot;);</code>：<br><code>var $allfile= $(&quot;#form1 :file&quot;);</code>：<br><code>var $allhidden= $(&quot;#form1 :hidden&quot;);</code>：<br><code>var $allselect = $(&quot;#form1 select&quot;);</code>：<br><code>var $alltextarea = $(&quot;#form1 textarea&quot;);</code>：<br><code>var $AllInputs = $(&quot;#form1 :input&quot;);</code>：<br><code>var $inputs = $(&quot;#form1 input&quot;);</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">        $(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> $alltext = $(<span class="string">"#form1 :text"</span>);</div><div class="line">        <span class="keyword">var</span> $allpassword= $(<span class="string">"#form1 :password"</span>);</div><div class="line">        <span class="keyword">var</span> $allradio= $(<span class="string">"#form1 :radio"</span>);</div><div class="line">        <span class="keyword">var</span> $allcheckbox= $(<span class="string">"#form1 :checkbox"</span>);</div><div class="line"></div><div class="line">        <span class="keyword">var</span> $allsubmit= $(<span class="string">"#form1 :submit"</span>);</div><div class="line">        <span class="keyword">var</span> $allimage= $(<span class="string">"#form1 :image"</span>);</div><div class="line">        <span class="keyword">var</span> $allreset= $(<span class="string">"#form1 :reset"</span>);</div><div class="line">        <span class="keyword">var</span> $allbutton= $(<span class="string">"#form1 :button"</span>); <span class="comment">// &lt;input type=button /&gt;  和 &lt;button &gt;&lt;/button&gt;都可以匹配</span></div><div class="line">        <span class="keyword">var</span> $allfile= $(<span class="string">"#form1 :file"</span>);</div><div class="line">        <span class="keyword">var</span> $allhidden= $(<span class="string">"#form1 :hidden"</span>); <span class="comment">// &lt;input type="hidden" /&gt;和&lt;div style="display:none"&gt;test&lt;/div&gt;都可以匹配.</span></div><div class="line">        <span class="keyword">var</span> $allselect = $(<span class="string">"#form1 select"</span>);</div><div class="line">        <span class="keyword">var</span> $alltextarea = $(<span class="string">"#form1 textarea"</span>);</div><div class="line">        <span class="keyword">var</span> $AllInputs = $(<span class="string">"#form1 :input"</span>);</div><div class="line">        <span class="keyword">var</span> $inputs = $(<span class="string">"#form1 input"</span>);</div><div class="line">        $(<span class="string">"div"</span>).append(<span class="string">" 有"</span> + $alltext.length + <span class="string">" 个（ :text 元素）&lt;br/&gt;"</span>)</div><div class="line">                .append(<span class="string">" 有"</span> + $allpassword.length + <span class="string">" 个（ :password 元素）&lt;br/&gt;"</span>)</div><div class="line">                .append(<span class="string">" 有"</span> + $allradio.length + <span class="string">" 个（ :radio 元素）&lt;br/&gt;"</span>)</div><div class="line">                .append(<span class="string">" 有"</span> + $allcheckbox.length + <span class="string">" 个（ :checkbox 元素）&lt;br/&gt;"</span>)</div><div class="line">                .append(<span class="string">" 有"</span> + $allsubmit.length + <span class="string">" 个（ :submit 元素）&lt;br/&gt;"</span>)</div><div class="line">                .append(<span class="string">" 有"</span> + $allimage.length + <span class="string">" 个（ :image 元素）&lt;br/&gt;"</span>)</div><div class="line">                .append(<span class="string">" 有"</span> + $allreset.length + <span class="string">" 个（ :reset 元素）&lt;br/&gt;"</span>)</div><div class="line">                .append(<span class="string">" 有"</span> + $allbutton.length + <span class="string">" 个（ :button 元素）&lt;br/&gt;"</span>)</div><div class="line">                .append(<span class="string">" 有"</span> + $allfile.length + <span class="string">" 个（ :file 元素）&lt;br/&gt;"</span>)</div><div class="line">                .append(<span class="string">" 有"</span> + $allhidden.length + <span class="string">" 个（ :hidden 元素）&lt;br/&gt;"</span>)</div><div class="line">                .append(<span class="string">" 有"</span> + $allselect.length + <span class="string">" 个（ select 元素）&lt;br/&gt;"</span>)</div><div class="line">                .append(<span class="string">" 有"</span> + $alltextarea.length + <span class="string">" 个（ textarea 元素）&lt;br/&gt;"</span>)</div><div class="line">                .append(<span class="string">" 表单有 "</span> + $inputs.length + <span class="string">" 个（input）元素。&lt;br/&gt;"</span>)</div><div class="line">                .append(<span class="string">" 总共有 "</span> + $AllInputs.length + <span class="string">" 个(:input)元素。&lt;br/&gt;"</span>)</div><div class="line">                .css(<span class="string">"color"</span>, <span class="string">"red"</span>)</div><div class="line">        $(<span class="string">"form"</span>).submit(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="literal">false</span>; &#125;); <span class="comment">// return false;不能提交.</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h1 id="dom操作"><a href="#dom操作" class="headerlink" title="dom操作"></a>dom操作</h1><p>页面上面的元素分为三种类型的节点：<br>1：元素节点 （9大选择器都是用来找元素节点）<br>2：属性节点 （先找到元素节点，然后调用attr()）<br>3：文本节点 (先找到元素节点然后调用text())  </p>
<p>节点的创建：元素节点的创建，属性节点，文本节点</p>
<h2 id="查找节点"><a href="#查找节点" class="headerlink" title="查找节点"></a>查找节点</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">"bj"</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">"tj"</span> <span class="attr">name</span>=<span class="string">"tianjin"</span>&gt;</span>天津<span class="tag">&lt;/<span class="name">li</span>&gt;</span>   </div><div class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="comment">//元素节点的查找</span></div><div class="line">    <span class="comment">//怎么查找元素节点的属性节点</span></div><div class="line">    alert($(<span class="string">"#tj"</span>).attr(<span class="string">"name"</span>));    </div><div class="line">    <span class="comment">//文本节点查找  text();</span></div><div class="line">    alert($(<span class="string">"#tj"</span>).text());</div><div class="line">    <span class="comment">//删除属性节点</span></div><div class="line">    $(<span class="string">"#tj"</span>).removeAttr(<span class="string">"name"</span>);</div><div class="line">    alert($(<span class="string">"#tj"</span>).attr(<span class="string">"name"</span>));</div><div class="line">    <span class="comment">//设置属性节点</span></div><div class="line">    $(<span class="string">"#tj"</span>).attr(<span class="string">"name"</span>,<span class="string">"tianjin"</span>)</div><div class="line">    alert($(<span class="string">"#tj"</span>).attr(<span class="string">"name"</span>));</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="创建节点"><a href="#创建节点" class="headerlink" title="创建节点"></a>创建节点</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"city"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">"bj"</span> <span class="attr">name</span>=<span class="string">"beijing"</span>&gt;</span>北京<span class="tag">&lt;/<span class="name">li</span>&gt;</span>       </div><div class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="comment">//通过jquery dom 创建&lt;li id="tj" name="tianjin"&gt;天津&lt;/li&gt;		</span></div><div class="line">    <span class="comment">//创建元素节点</span></div><div class="line">    <span class="keyword">var</span> $li=$(<span class="string">"&lt;li&gt;&lt;/li&gt;"</span>);</div><div class="line">    <span class="comment">//设置属性节点</span></div><div class="line">    $li.attr(<span class="string">"id"</span>,<span class="string">"tj"</span>);</div><div class="line">    $li.attr(<span class="string">"id"</span>,<span class="string">"tj"</span>);</div><div class="line">    <span class="comment">//设置文本节点</span></div><div class="line">    $li.text(<span class="string">"天津"</span>);</div><div class="line">    alert(<span class="string">'a'</span>);</div><div class="line">    <span class="comment">//获取节点</span></div><div class="line">    <span class="keyword">var</span> $city=$(<span class="string">"#city"</span>);</div><div class="line">    <span class="comment">//往节点里面追加创建好的节点..</span></div><div class="line">    $city.append($li);</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="内部插入节点"><a href="#内部插入节点" class="headerlink" title="内部插入节点"></a>内部插入节点</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"city"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">"bj"</span> <span class="attr">name</span>=<span class="string">"beijing"</span>&gt;</span>北京<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">"tj"</span> <span class="attr">name</span>=<span class="string">"tianjin"</span>&gt;</span>天津<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">"cq"</span> <span class="attr">name</span>=<span class="string">"chongqing"</span>&gt;</span>重庆<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"love"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">"fk"</span> <span class="attr">name</span>=<span class="string">"fankong"</span>&gt;</span>反恐<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">"xj"</span> <span class="attr">name</span>=<span class="string">"xingji"</span>&gt;</span>星际<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span>   </div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"foo1"</span>&gt;</span>Hello1<span class="tag">&lt;/<span class="name">div</span>&gt;</span>    </div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript">	</span></div><div class="line">    <span class="comment">//append(content):向每个匹配的元素的内部的结尾处追加内容</span></div><div class="line">    $(<span class="string">"#bj"</span>).append($(<span class="string">"#fk"</span>));</div><div class="line">    <span class="comment">//appendTo(content):将每个匹配的元素追加到指定的元素中的内部结尾处</span></div><div class="line">    $(<span class="string">"#bj"</span>).appendTo($(<span class="string">"#fk"</span>));</div><div class="line">    <span class="comment">//prepend(content):向每个匹配的元素的内部的开始处插入内容</span></div><div class="line">    $(<span class="string">"#bj"</span>).prepend($(<span class="string">"#fk"</span>));</div><div class="line">    <span class="comment">//prependTo(content):将每个匹配的元素插入到指定的元素内部的开始处</span></div><div class="line">    $(<span class="string">"#bj"</span>).prependTo($(<span class="string">"#fk"</span>));</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="外部插入节点"><a href="#外部插入节点" class="headerlink" title="外部插入节点"></a>外部插入节点</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"city"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">"bj"</span> <span class="attr">name</span>=<span class="string">"beijing"</span>&gt;</span>北京<span class="tag">&lt;/<span class="name">li</span>&gt;</span>           </div><div class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">"tj"</span> <span class="attr">name</span>=<span class="string">"tianjin"</span>&gt;</span>天津<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">"cq"</span> <span class="attr">name</span>=<span class="string">"chongqing"</span>&gt;</span>重庆<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span>		</div><div class="line">    <span class="tag">&lt;<span class="name">p</span>  <span class="attr">id</span>=<span class="string">"p3"</span>&gt;</span>I would like to say: p3<span class="tag">&lt;/<span class="name">p</span>&gt;</span>		 </div><div class="line">    <span class="tag">&lt;<span class="name">p</span>  <span class="attr">id</span>=<span class="string">"p2"</span>&gt;</span>I would like to say: p2<span class="tag">&lt;/<span class="name">p</span>&gt;</span>	</div><div class="line">    <span class="tag">&lt;<span class="name">p</span>  <span class="attr">id</span>=<span class="string">"p1"</span>&gt;</span>I would like to say: p1<span class="tag">&lt;/<span class="name">p</span>&gt;</span>      </div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="comment">//	在每个匹配的元素之后插入内容</span></div><div class="line">    <span class="comment">//	$("#bj").after($("#p3"));</span></div><div class="line">    <span class="comment">//  在每个匹配元素 的前面插入内容</span></div><div class="line">    <span class="comment">//	$("#bj").before($("#p3"));</span></div><div class="line">    <span class="comment">//	$("#bj").insertAfter($("#p3"));</span></div><div class="line">	$(<span class="string">"#bj"</span>).insertBefore($(<span class="string">"#p3"</span>));</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="删除节点"><a href="#删除节点" class="headerlink" title="删除节点"></a>删除节点</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"city"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">"bj"</span> <span class="attr">name</span>=<span class="string">"beijing"</span>&gt;</span>北京<span class="tag">&lt;<span class="name">p</span>&gt;</span>海淀区<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">"tj"</span> <span class="attr">name</span>=<span class="string">"tianjin"</span>&gt;</span>天津<span class="tag">&lt;<span class="name">p</span>&gt;</span>河西区<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">"cq"</span> <span class="attr">name</span>=<span class="string">"chongqing"</span>&gt;</span>重庆<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"hello"</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">p</span>&gt;</span> how are <span class="tag">&lt;<span class="name">p</span>&gt;</span>you?<span class="tag">&lt;/<span class="name">p</span>&gt;</span> </div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="comment">//$("#bj").remove();</span></div><div class="line">    $(<span class="string">"#city"</span>).remove();	</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="复制节点"><a href="#复制节点" class="headerlink" title="复制节点"></a>复制节点</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">button</span>&gt;</span>保存<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span>	</div><div class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>段落<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="comment">//button增加事件</span></div><div class="line">    $(<span class="string">"button"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        $(<span class="string">"p"</span>).append($(<span class="string">"button"</span>).clone(<span class="literal">true</span>));       </div><div class="line">    &#125;);</div><div class="line">    <span class="comment">// clone 克隆某个元素的副本，但是这个副本不具备任何的行为，不具备任何的时间</span></div><div class="line">    <span class="comment">// 如果需要把时间也克隆过去，需要在clone(true));</span></div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="替换节点"><a href="#替换节点" class="headerlink" title="替换节点"></a>替换节点</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>段落<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>段落<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>段落<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">button</span>&gt;</span>保存<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"></span></div><div class="line">		<span class="comment">// 将所有匹配的元素都替换为指定的 HTML 或 DOM 元素</span></div><div class="line">        <span class="comment">// $("button").replaceWith($("p"));</span></div><div class="line">		$(<span class="string">"button"</span>).replaceAll($(<span class="string">"p"</span>));</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="样式操作"><a href="#样式操作" class="headerlink" title="样式操作"></a>样式操作</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></div><div class="line">        .one&#123;</div><div class="line">            width: 200px;</div><div class="line">            height: 140px;</div><div class="line">            margin: 40px;</div><div class="line">            background: red;</div><div class="line">            border: #000 1px solid;</div><div class="line">            float:left;</div><div class="line">            font-size: 17px;</div><div class="line">            font-family:Roman;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        div,span&#123;</div><div class="line">            width: 140px;</div><div class="line">            height: 140px;</div><div class="line">            margin: 20px;</div><div class="line">            background: #9999CC;</div><div class="line">            border: #000 1px solid;</div><div class="line">            float:left;</div><div class="line">            font-size: 17px;</div><div class="line">            font-family:Roman;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        div.mini&#123;</div><div class="line">            width: 30px;</div><div class="line">            height: 30px;</div><div class="line">            background: #CC66FF;</div><div class="line">            border: #000 1px solid;</div><div class="line">            font-size: 12px;</div><div class="line">            font-family:Roman;</div><div class="line">        &#125;</div><div class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"></span></div><div class="line"><span class="comment">//&lt;input type="button" value="采用属性增加样式"  id="b1"/&gt;</span></div><div class="line">	$(<span class="string">"#b1"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		  $(<span class="string">"#mover"</span>).css(<span class="string">"background"</span>,<span class="string">"red"</span>);		</div><div class="line">	&#125;);</div><div class="line">	</div><div class="line"><span class="comment">//&lt;input type="button" value=" addClass"  id="b2"/&gt;</span></div><div class="line">	$(<span class="string">"#b2"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			$(<span class="string">"#mover"</span>).addClass(<span class="string">"mini"</span>);		</div><div class="line">	&#125;);</div><div class="line"></div><div class="line"><span class="comment">//&lt;input type="button" value="removeClass"  id="b3"/&gt;</span></div><div class="line">	$(<span class="string">"#b3"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="comment">/*</span></div><div class="line">		 * removeClass():</div><div class="line">		 * 	* 不传参数:删除所有样式</div><div class="line">		 * 	* 传递参数:删除指定样式</div><div class="line">		 */		</div><div class="line">		  $(<span class="string">"#mover"</span>).removeClass();</div><div class="line">		<span class="comment">//$("#mover").removeClass();</span></div><div class="line">	&#125;);</div><div class="line"></div><div class="line"><span class="comment">//&lt;input type="button" value=" 切换样式"  id="b4"/&gt;</span></div><div class="line">	$(<span class="string">"#b4"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;		</div><div class="line">		$(<span class="string">"#mover"</span>).toggleClass(<span class="string">"one"</span>);</div><div class="line">	&#125;);</div><div class="line"></div><div class="line"><span class="comment">//&lt;input type="button" value=" hasClass"  id="b5"/&gt;</span></div><div class="line">	$(<span class="string">"#b5"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="comment">//hasClass():判断某个元素是否含有某个指定样式</span></div><div class="line">		$(<span class="string">"#mover"</span>).addClass(<span class="string">"mini"</span>);</div><div class="line">		alert($(<span class="string">"#mover"</span>).hasClass(<span class="string">"mini"</span>));		</div><div class="line">	&#125;);</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="遍历节点"><a href="#遍历节点" class="headerlink" title="遍历节点"></a>遍历节点</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"city"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">"bj"</span> <span class="attr">name</span>=<span class="string">"beijing"</span>&gt;</span>北京<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">"tj"</span> <span class="attr">name</span>=<span class="string">"tianjin"</span>&gt;</span>天津<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">"nj"</span> <span class="attr">name</span>=<span class="string">"nanjing"</span>&gt;</span>南京<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span>   </div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="comment">// 该方法只考虑子元素而不考虑任何后代元素.</span></div><div class="line">    <span class="comment">//	alert($("#city").children().length);</span></div><div class="line">    <span class="comment">//	取得相邻元素的下一个同级元素</span></div><div class="line">    <span class="comment">//	alert($("#bj").next().text());</span></div><div class="line"></div><div class="line">    <span class="comment">//	alert($("#tj").prev().text());</span></div><div class="line"></div><div class="line">    <span class="comment">//	alert($("#bj").siblings().length);</span></div><div class="line"></div><div class="line">    <span class="comment">//find</span></div><div class="line">    <span class="comment">//选获取元素通过find 找到对应的标签的子元素的集合...</span></div><div class="line">        alert($(<span class="string">"#city"</span>).find(<span class="string">"li"</span>).length);</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="包裹节点"><a href="#包裹节点" class="headerlink" title="包裹节点"></a>包裹节点</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">strong</span> <span class="attr">title</span>=<span class="string">"jQuery"</span>&gt;</span>jQuery<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">strong</span> <span class="attr">title</span>=<span class="string">"jQuery"</span>&gt;</span>jQuery<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="comment">//jQuery代码如下：</span></div><div class="line">    <span class="comment">// $("strong").wrap("&lt;b&gt;&lt;/b&gt;");</span></div><div class="line">    </div><div class="line">    $(<span class="string">"strong"</span>).wrapAll(<span class="string">"&lt;b&gt;&lt;/b&gt;"</span>);</div><div class="line">    <span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;&lt;<span class="attr">strong</span> <span class="attr">title</span>=<span class="string">"jQuery"</span>&gt;</span>jQuery<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">strong</span> <span class="attr">title</span>=<span class="string">"jQuery"</span>&gt;</span>jQuery<span class="tag">&lt;/<span class="name">strong</span>&gt;</span><span class="tag">&lt;/<span class="name">br</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">* DOM操作：jQuery中封装DOM(对比原生DOM的使用方法)</div><div class="line">    * 查找节点：</div><div class="line">        * 元素节点：所有的选择器</div><div class="line">        * 文本节点：text()</div><div class="line">        * 属性节点：</div><div class="line">            * attr()</div><div class="line">            * removeAttr()</div><div class="line">    * 创建节点；</div><div class="line">        * 元素节点：$(HTML代码)</div><div class="line">        * 文本节点：text()</div><div class="line">        * 属性节点：attr()</div><div class="line">    * 插入：内部与外部</div><div class="line">    * 删除节点：</div><div class="line">        * remove()：删除自身节点及后代节点</div><div class="line">        * empty()：删除后代节点，自身节点保留（清空）</div><div class="line">    * 复制节点：</div><div class="line">        * jQuery的clone(Boolean)：表示是否复制事件。</div><div class="line">        * js的cloneNode(Boolean)：表示是否复制后代节点。</div><div class="line">    * 替换节点：</div><div class="line">        * replaceWith()：前面的元素是被替换元素;后面的元素是替换元素</div><div class="line">        * replaceAll()：就是颠倒了的replaceWith()</div><div class="line">    * html()方法：直接操作HTML代码（等价于innerHTML属性）</div><div class="line">    * 遍历节点：</div><div class="line">        * 子节点：children()</div><div class="line">        * 父节点：parent()</div><div class="line">        * 上一个兄弟节点：prev()</div><div class="line">        * 下一个兄弟节点：next()</div><div class="line">        * 所有兄弟节点：siblings()</div><div class="line">        * find()：通用遍历方法</div><div class="line">    * 包裹节点：</div><div class="line">        * wrap()：分别包裹</div><div class="line">        * wrapAll()：一起包裹</div><div class="line">        * wrapInner()：包裹内部</div></pre></td></tr></table></figure>
<h1 id="绑定与解绑事件"><a href="#绑定与解绑事件" class="headerlink" title="绑定与解绑事件"></a>绑定与解绑事件</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//页面加载完毕执行 </span></div><div class="line"><span class="built_in">window</span>.onload=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//页面加载完毕执行 </span></div><div class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">&#125;)</div><div class="line"></div><div class="line">$().ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>区别：<code>window.onload</code>与<code>$(function(){})</code>都是用来作于界面渲染完毕之后的初始化操作。</p>
<p><code>window.onload</code>需要等待页面上面所有的元素都绘制完毕之后才执行，包含图片。<br><code>$(function(){})</code>页面上面所有的dom元素绘制完毕之后就执行，不包含图片。  </p>
<h1 id="getscript和getjson"><a href="#getscript和getjson" class="headerlink" title="getscript和getjson"></a>getscript和getjson</h1><h1 id="jQuery的异步提交表单"><a href="#jQuery的异步提交表单" class="headerlink" title="jQuery的异步提交表单"></a>jQuery的异步提交表单</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>jQuery异步提交表单<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"keywords"</span> <span class="attr">content</span>=<span class="string">"keyword1,keyword2,keyword3"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"description"</span> <span class="attr">content</span>=<span class="string">"this is my page"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"content-type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=UTF-8"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"../../js/jquery-1.4.2.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"></span></div><div class="line">                $(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">                    $(<span class="string">"#formbutton"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">                        <span class="comment">// 发送异步的ajax 请求			</span></div><div class="line">                        </div><div class="line">                        <span class="comment">// 将表单里面的选项序列化成一个数组...</span></div><div class="line">                        <span class="comment">//var data=$("#form1").serialize();</span></div><div class="line">                        <span class="keyword">var</span> data=$(<span class="string">"#form1"</span>).serializeArray();</div><div class="line">                        </div><div class="line">                        <span class="comment">// 可以打印对象里面更加详细的信息				</span></div><div class="line">                        <span class="built_in">console</span>.info(data);</div><div class="line">                        </div><div class="line">                        <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;data.length;i++)&#123;</div><div class="line">                            alert(data[i].name);</div><div class="line">                            alert(data[i].value);</div><div class="line">                        &#125;</div><div class="line">                        $.ajax(&#123;</div><div class="line">                            <span class="attr">url</span>:<span class="string">"../../formServlet"</span>,	</div><div class="line">                            <span class="comment">//通过ajax方法提交的时候有两种数据格式(字符串/json)	 </span></div><div class="line">                            data:data,</div><div class="line">                            <span class="attr">type</span>:<span class="string">"POST"</span>,</div><div class="line">                            <span class="attr">success</span>:<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;							</div><div class="line">                            &#125;</div><div class="line">                        &#125;)</div><div class="line">                    &#125;)</div><div class="line">                &#125;)</div><div class="line">        <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">  </div><div class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">"form1"</span>&gt;</span></div><div class="line">                用户名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">id</span>=<span class="string">"username"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">                密&amp;nbsp;&amp;nbsp;码：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">id</span>=<span class="string">"password"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">                邮&amp;nbsp;&amp;nbsp;箱：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"email"</span> <span class="attr">id</span>=<span class="string">"email"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">input</span>  <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"异步提交表单"</span> <span class="attr">id</span>=<span class="string">"formbutton"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h1 id="jQuery的ajax-load交互"><a href="#jQuery的ajax-load交互" class="headerlink" title="jQuery的ajax load交互"></a>jQuery的ajax load交互</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>ajax 异步加载...<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"keywords"</span> <span class="attr">content</span>=<span class="string">"keyword1,keyword2,keyword3"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"description"</span> <span class="attr">content</span>=<span class="string">"this is my page"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"content-type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=UTF-8"</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!--当用户第一次访问界面的时候我们不需要加载页面上面所有的资源,当用户想看的时候去加载...--&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"../../js/jquery-1.4.2.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"></span></div><div class="line">        $(<span class="built_in">window</span>).scroll(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;                   </div><div class="line">                <span class="keyword">var</span> t=<span class="built_in">document</span>.documentElement.scrollTop;  </div><div class="line">                <span class="keyword">if</span>(t&gt;<span class="number">0</span>  &amp;&amp; t&lt;<span class="number">800</span>)&#123;                       </div><div class="line">                    loadImage(<span class="string">"1"</span>);</div><div class="line">                &#125;                   </div><div class="line">                <span class="keyword">if</span>(t&gt;<span class="number">800</span>  &amp;&amp; t&lt;<span class="number">1600</span>)&#123;                       </div><div class="line">                    loadImage(<span class="string">"2"</span>);</div><div class="line">                &#125;                    </div><div class="line">                <span class="keyword">if</span>(t&gt;<span class="number">1600</span>  &amp;&amp; t&lt;<span class="number">2400</span>)&#123;                      </div><div class="line">                    loadImage(<span class="string">"3"</span>);</div><div class="line">                &#125;                    </div><div class="line">                <span class="keyword">if</span>(t&gt;<span class="number">2400</span>  &amp;&amp; t&lt;<span class="number">3200</span>)&#123;</div><div class="line">                    loadImage(<span class="string">"4"</span>);                  </div><div class="line">                &#125;                 </div><div class="line">                <span class="keyword">if</span>(t&gt;<span class="number">3200</span>  &amp;&amp; t&lt;<span class="number">4000</span>)&#123;                      </div><div class="line">                    loadImage(<span class="string">"5"</span>);</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">if</span>(t&gt;<span class="number">4000</span>  &amp;&amp; t&lt;<span class="number">4800</span>)&#123;</div><div class="line">                    loadImage(<span class="string">"6"</span>);                </div><div class="line">                &#125;                </div><div class="line">                </div><div class="line">                <span class="function"><span class="keyword">function</span> <span class="title">loadImage</span>(<span class="params">imageType</span>)</span>&#123;</div><div class="line">                    $.ajax(&#123;</div><div class="line">                        <span class="attr">url</span>:<span class="string">"../../imageServlet"</span>,</div><div class="line">                        <span class="attr">type</span>:<span class="string">"POST"</span>,</div><div class="line">                        <span class="attr">data</span>:&#123;</div><div class="line">                            <span class="attr">imageType</span>:imageType</div><div class="line">                        &#125;,</div><div class="line">                        <span class="attr">success</span>:<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</div><div class="line">                            <span class="keyword">var</span> area=<span class="string">"#area_"</span>+imageType;</div><div class="line">                            <span class="keyword">var</span> image=<span class="string">"&lt;img src='../../"</span>+data+<span class="string">"'&gt;"</span>;</div><div class="line">                            $(area).html(image);</div><div class="line">                        &#125;</div><div class="line">                    &#125;)                    </div><div class="line">                &#125;</div><div class="line">        &#125;)</div><div class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></div><div class="line">            #message&#123;</div><div class="line">                height:4800px;</div><div class="line">            &#125;               </div><div class="line">            #message div&#123;</div><div class="line">                height:800px;</div><div class="line">                border:30px solid red;</div><div class="line">            &#125;      </div><div class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">  </div><div class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"message"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"area_1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"area_2"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"area_3"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"area_4"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"area_5"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"area_6"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h1 id="jQuery的插件扩展"><a href="#jQuery的插件扩展" class="headerlink" title="jQuery的插件扩展"></a>jQuery的插件扩展</h1><p>1.全局方法的插件<br><code>$.validateUsername(&quot;&quot;)</code><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&lt;script type=<span class="string">"text/javascript"</span>&gt;</div><div class="line">    $.extend(&#123;</div><div class="line">        <span class="attr">Constants</span>:&#123;</div><div class="line">            <span class="attr">baseURL</span>:<span class="string">"http://localhost:8080/jQuery"</span></div><div class="line">        &#125;,</div><div class="line">        <span class="attr">validateTelephone</span>:<span class="function"><span class="keyword">function</span>(<span class="params">tel</span>)</span>&#123;</div><div class="line">            alert(tel);</div><div class="line">            $Constants.baseURL</div><div class="line">        &#125;</div><div class="line">    &#125;)</div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure></p>
<p>2.局部方法的插件<br><code>$(&quot;#datagrid&quot;).datagrid({})</code><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;script type=<span class="string">"text/javascript"</span>&gt;</div><div class="line">    $.fn.extend(&#123;</div><div class="line">        <span class="attr">datagrid</span>:<span class="function"><span class="keyword">function</span>(<span class="params">obj</span>)</span>&#123;</div><div class="line">            <span class="keyword">var</span> columns=obj.columns;</div><div class="line">            <span class="keyword">var</span> tr=<span class="string">"&lt;tr&gt;"</span>;</div><div class="line">            ......</div><div class="line">        &#125;</div><div class="line">    &#125;)</div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure></p>
<p>3.选择器插件</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://patrickphang.github.io/2017/02/11/PageHelper分页/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Patrick Phang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/casillas.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Patrick's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/02/11/PageHelper分页/" itemprop="url">
                  PageHelper分页
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-02-11T22:45:17+08:00">
                2017-02-11
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JavaWeb/" itemprop="url" rel="index">
                    <span itemprop="name">JavaWeb</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/02/11/PageHelper分页/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/02/11/PageHelper分页/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2017/02/11/PageHelper分页/" class="leancloud_visitors" data-flag-title="PageHelper分页">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>前些天按照视频里讲的做一个分页功能，可是不知道什么原因在页面就是不显示数据。昨天碰巧发现了一个分页插件，只需一些设置就可以完成分页，非常方便。不过由于是新手，其中遇到了很多很多麻烦，不过幸好得到大神的帮助，最终完成了功能，非常感谢他十分耐心地帮我，给你一个么么哒(づ￣ 3￣)づ<br>没想到做一个小小的分页功能也有这么多的不懂的地方，感觉要学的东西太多太多，加油努力学习吧~</p>
<p>首先给出项目Github地址：<a href="https://github.com/pagehelper/Mybatis-PageHelper">Mybatis通用分页插件</a><br>然后按步骤给出各部分代码（其他无关代码和配置文件省略）</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/02/11/PageHelper分页/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://patrickphang.github.io/2017/02/11/ajax/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Patrick Phang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/casillas.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Patrick's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/02/11/ajax/" itemprop="url">
                  Ajax
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-02-11T18:36:58+08:00">
                2017-02-11
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JavaWeb/" itemprop="url" rel="index">
                    <span itemprop="name">JavaWeb</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/02/11/ajax/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/02/11/ajax/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2017/02/11/ajax/" class="leancloud_visitors" data-flag-title="Ajax">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="AJAX应用的五个步骤"><a href="#AJAX应用的五个步骤" class="headerlink" title="AJAX应用的五个步骤"></a>AJAX应用的五个步骤</h1><ol>
<li>建立XMLHttpRequest对象</li>
<li>设置回调函数</li>
<li>使用open方法与服务器建立连接</li>
<li>向服务器端发送数据</li>
<li>在回调函数针对不同响应状态进行处理</li>
</ol>
<h1 id="小练习"><a href="#小练习" class="headerlink" title="小练习"></a>小练习</h1><ol>
<li>去参数</li>
<li>检查参数是否有问题</li>
<li>校验操作</li>
<li>这一步需要将用户感兴趣的数据返回给页面端，而不是将一个新的页面发送给用户</li>
</ol>
<h1 id="文本格式"><a href="#文本格式" class="headerlink" title="文本格式"></a>文本格式</h1><p><code>AJAXServer.java</code><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AJAXServer</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span>&#123;</div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</div><div class="line">        doGet(httpServletRequest, httpServletResponse);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</div><div class="line">        <span class="keyword">try</span>&#123;</div><div class="line">            httpServletResponse.setContentType(<span class="string">"text/html;charset=utf-8"</span>);</div><div class="line">            PrintWriter out = httpServletResponse.getWriter();</div><div class="line"></div><div class="line">            <span class="comment">// 1.取参数</span></div><div class="line">            String old = httpServletRequest.getParameter(<span class="string">"name"</span>);</div><div class="line">            <span class="comment">// 2.检查参数是否有问题</span></div><div class="line">            <span class="keyword">if</span> (old == <span class="keyword">null</span> || old.length() == <span class="number">0</span>) &#123;</div><div class="line">                out.println(<span class="string">"用户名不能为空"</span>);</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                <span class="comment">// 3.校验操作</span></div><div class="line">                String name = old;</div><div class="line">                <span class="keyword">if</span> (name.equals(<span class="string">"wangxingkui"</span>)) &#123;</div><div class="line">                    <span class="comment">//4.和传统应用不同之处。这一步需要将用户感兴趣的数据返回给页面段，而不是将一个新的页面发送给用户</span></div><div class="line">                    <span class="comment">//写法没有变化，本质发生了改变</span></div><div class="line">                    out.println(<span class="string">"用户名["</span> + name + <span class="string">"]已经存在，请使用其他用户名, "</span> + temp);</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    out.println(<span class="string">"用户名["</span> + name + <span class="string">"]尚未存在，可以使用该用户名注册, "</span> + temp);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125; </div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><code>verify.js</code><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//定义用户名校验的方法</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">verify</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="comment">// 1.获取文本框中的内容</span></div><div class="line">    <span class="keyword">var</span> jqueryObj = $(<span class="string">"#userName"</span>);</div><div class="line">    <span class="comment">//获取节点的值</span></div><div class="line">    <span class="keyword">var</span> userName = jqueryObj.val();</div><div class="line"></div><div class="line">    <span class="comment">// 2.将文本框中的数据发送给服务器段的servlet</span></div><div class="line">    <span class="comment">//使用jquery的XMLHTTPrequest对象get请求的封装：get(url,data,callback)</span></div><div class="line">    $.get(<span class="string">"AJAXServer?name="</span> + userName,<span class="literal">null</span>,callback);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//回调函数</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">callback</span>(<span class="params">data</span>) </span>&#123;</div><div class="line">    <span class="comment">// 3.接收服务器端返回的数据</span></div><div class="line">    alert(data);</div><div class="line">    <span class="comment">// 4.将服务器段返回的数据动态的显示在页面上</span></div><div class="line">    <span class="comment">//找到保存结果信息的节点</span></div><div class="line">    <span class="keyword">var</span> resultObj = $(<span class="string">"#result"</span>);</div><div class="line">    <span class="comment">//动态的改变页面中div节点中的内容</span></div><div class="line">    resultObj.html(data);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h1 id="jQuery的总结与简化调用"><a href="#jQuery的总结与简化调用" class="headerlink" title="jQuery的总结与简化调用"></a>jQuery的总结与简化调用</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 复杂版本</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">verify</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">//解决中文乱码问题的方法1，页面端发出的数据作一次encodeURI，服务器段使用new String(old.getBytes("iso8859-1"),"UTF-8");</span></div><div class="line">    <span class="comment">//解决中文乱码问题的方法2，页面端发出的数据作两次encodeURI，服务器段使用URLDecoder.decode(old,"UTF-8")</span></div><div class="line">    <span class="keyword">var</span> url = <span class="string">"AJAXServer?name="</span> + <span class="built_in">encodeURI</span>(<span class="built_in">encodeURI</span>($(<span class="string">"#userName"</span>).val()));</div><div class="line">    url = convertURL(url);</div><div class="line"></div><div class="line">    $.get(url,<span class="literal">null</span>,<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</div><div class="line">        $(<span class="string">"#result"</span>).html(data);</div><div class="line">&#125;);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 简化版本</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">verify</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    $.get(<span class="string">"AJAXServer?name="</span> + $(<span class="string">"#userName"</span>).val(),<span class="literal">null</span>,<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</div><div class="line">        $(<span class="string">"#result"</span>).html(data);</div><div class="line">    &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="XHR对象的创建"><a href="#XHR对象的创建" class="headerlink" title="XHR对象的创建"></a>XHR对象的创建</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> xmlhttp;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">verify</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">// 0.使用dom的方式获取文本框中的值</span></div><div class="line">    <span class="keyword">var</span> userName = <span class="built_in">document</span>.getElementById(<span class="string">"userName"</span>).value;</div><div class="line"></div><div class="line">    <span class="comment">// 1.创建XMLHttpRequest对象</span></div><div class="line">    <span class="comment">//这是XMLHttpReuquest对象无部使用中最复杂的一步，需要针对IE和其他类型的浏览器建立这个对象的不同方式写不同的代码</span></div><div class="line">    <span class="keyword">if</span> (<span class="built_in">window</span>.XMLHttpRequest) &#123;</div><div class="line">        <span class="comment">//针对FireFox，Mozillar，Opera，Safari，IE7，IE8</span></div><div class="line">        xmlhttp = <span class="keyword">new</span> XMLHttpRequest();</div><div class="line">        <span class="comment">//针对某些特定版本的mozillar浏览器的BUG进行修正</span></div><div class="line">        <span class="keyword">if</span> (xmlhttp.overrideMimeType) &#123;</div><div class="line">            xmlhttp.overrideMimeType(<span class="string">"text/xml"</span>);</div><div class="line">        &#125;</div><div class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">window</span>.ActiveXObject) &#123;</div><div class="line">        <span class="comment">//针对IE6，IE5.5，IE5</span></div><div class="line">        <span class="comment">//两个可以用于创建XMLHTTPRequest对象的控件名称，保存在一个js的数组中</span></div><div class="line">        <span class="comment">//排在前面的版本较新</span></div><div class="line">        <span class="keyword">var</span> activexName = [<span class="string">"MSXML2.XMLHTTP"</span>,<span class="string">"Microsoft.XMLHTTP"</span>];</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; activexName.length; i++) &#123;</div><div class="line">            <span class="keyword">try</span>&#123;</div><div class="line">                <span class="comment">//取出一个控件名进行创建，如果创建成功就终止循环</span></div><div class="line">                <span class="comment">//如果创建失败，回抛出异常，然后可以继续循环，继续尝试创建</span></div><div class="line">                xmlhttp = <span class="keyword">new</span> ActiveXObject(activexName[i]);</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            &#125; <span class="keyword">catch</span>(e)&#123;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//确认XMLHTtpRequest对象创建成功</span></div><div class="line">    <span class="keyword">if</span> (!xmlhttp) &#123;</div><div class="line">        alert(<span class="string">"XMLHttpRequest对象创建失败!!"</span>);</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        alert(xmlhttp.readyState);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="使用XHR对象发送和接受数据"><a href="#使用XHR对象发送和接受数据" class="headerlink" title="使用XHR对象发送和接受数据"></a>使用XHR对象发送和接受数据</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//--------------------------------------------------------------------------------------------第一步的代码</span></div><div class="line"><span class="keyword">var</span> xmlhttp;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">verify</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">// 0.使用dom的方式获取文本框中的值</span></div><div class="line">    <span class="keyword">var</span> userName = <span class="built_in">document</span>.getElementById(<span class="string">"userName"</span>).value;</div><div class="line"></div><div class="line">    <span class="comment">// 1.创建XMLHttpRequest对象</span></div><div class="line">    <span class="comment">//这是XMLHttpReuquest对象无部使用中最复杂的一步，需要针对IE和其他类型的浏览器建立这个对象的不同方式写不同的代码</span></div><div class="line">    <span class="keyword">if</span> (<span class="built_in">window</span>.XMLHttpRequest) &#123;</div><div class="line">        <span class="comment">//针对FireFox，Mozillar，Opera，Safari，IE7，IE8</span></div><div class="line">        xmlhttp = <span class="keyword">new</span> XMLHttpRequest();</div><div class="line">        <span class="comment">//针对某些特定版本的mozillar浏览器的BUG进行修正</span></div><div class="line">        <span class="keyword">if</span> (xmlhttp.overrideMimeType) &#123;</div><div class="line">            xmlhttp.overrideMimeType(<span class="string">"text/xml"</span>);</div><div class="line">        &#125;</div><div class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">window</span>.ActiveXObject) &#123;</div><div class="line">        <span class="comment">//针对IE6，IE5.5，IE5</span></div><div class="line">        <span class="comment">//两个可以用于创建XMLHTTPRequest对象的控件名称，保存在一个js的数组中</span></div><div class="line">        <span class="comment">//排在前面的版本较新</span></div><div class="line">        <span class="keyword">var</span> activexName = [<span class="string">"MSXML2.XMLHTTP"</span>,<span class="string">"Microsoft.XMLHTTP"</span>];</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; activexName.length; i++) &#123;</div><div class="line">            <span class="keyword">try</span>&#123;</div><div class="line">                <span class="comment">//取出一个控件名进行创建，如果创建成功就终止循环</span></div><div class="line">                <span class="comment">//如果创建失败，回抛出异常，然后可以继续循环，继续尝试创建</span></div><div class="line">                xmlhttp = <span class="keyword">new</span> ActiveXObject(activexName[i]);</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            &#125; <span class="keyword">catch</span>(e)&#123;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//确认XMLHTtpRequest对象创建成功</span></div><div class="line">    <span class="keyword">if</span> (!xmlhttp) &#123;</div><div class="line">        alert(<span class="string">"XMLHttpRequest对象创建失败!!"</span>);</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        alert(xmlhttp.readyState);</div><div class="line">    &#125;</div><div class="line"><span class="comment">//--------------------------------------------------------------------------------------------第一步的代码</span></div><div class="line"></div><div class="line">    <span class="comment">// 2.注册回调函数</span></div><div class="line">    <span class="comment">//注册回调函数时，之需要函数名，不要加括号</span></div><div class="line">    <span class="comment">//我们需要将函数名注册，如果加上括号，就会把函数的返回值注册上，这是错误的</span></div><div class="line">    xmlhttp.onreadystatechange = callback;</div><div class="line"></div><div class="line">    <span class="comment">// 3.设置连接信息</span></div><div class="line">    <span class="comment">//第一个参数表示http的请求方式，支持所有http的请求方式，主要使用get和post</span></div><div class="line">    <span class="comment">//第二个参数表示请求的url地址，get方式请求的参数也在url中</span></div><div class="line">    <span class="comment">//第三个参数表示采用异步还是同步方式交互，true表示异步</span></div><div class="line">    xmlhttp.open(<span class="string">"GET"</span>,<span class="string">"AJAXServer?name="</span>+ userName,<span class="literal">true</span>);</div><div class="line"></div><div class="line">    <span class="comment">//POST方式请求的代码</span></div><div class="line">    <span class="comment">//xmlhttp.open("POST","AJAXServer",true);</span></div><div class="line">    <span class="comment">//POST方式需要自己设置http的请求头</span></div><div class="line">    <span class="comment">//xmlhttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded");</span></div><div class="line">    <span class="comment">//POST方式发送数据</span></div><div class="line">    <span class="comment">//xmlhttp.send("name=" + userName);</span></div><div class="line"></div><div class="line">    <span class="comment">// 4.发送数据，开始和服务器端进行交互</span></div><div class="line">    <span class="comment">//同步方式下，send这句话会在服务器段数据回来后才执行完</span></div><div class="line">    <span class="comment">//异步方式下，send这句话会立即完成执行</span></div><div class="line">    xmlhttp.send(<span class="literal">null</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//回调函数</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">callback</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">// 5.接收响应数据</span></div><div class="line">    <span class="comment">//判断对象的状态是交互完成</span></div><div class="line">    <span class="keyword">if</span> (xmlhttp.readyState == <span class="number">4</span>) &#123;</div><div class="line">        <span class="comment">//判断http的交互是否成功</span></div><div class="line">        <span class="keyword">if</span> (xmlhttp.status == <span class="number">200</span>) &#123;</div><div class="line">            <span class="comment">//获取服务器端返回的数据</span></div><div class="line">            <span class="comment">//获取服务器端输出的纯文本数据</span></div><div class="line">            <span class="keyword">var</span> responseText = xmlhttp.responseText;</div><div class="line">            <span class="comment">//将数据显示在页面上</span></div><div class="line">            <span class="comment">//通过dom的方式找到div标签所对应的元素节点</span></div><div class="line">            <span class="keyword">var</span> divNode = <span class="built_in">document</span>.getElementById(<span class="string">"result"</span>);</div><div class="line">            <span class="comment">//设置元素节点中的html内容</span></div><div class="line">            divNode.innerHTML = responseText;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            alert(<span class="string">"出错了！！！"</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="xml格式（利用XHR接受和处理XML数据）"><a href="#xml格式（利用XHR接受和处理XML数据）" class="headerlink" title="xml格式（利用XHR接受和处理XML数据）"></a>xml格式（利用XHR接受和处理XML数据）</h1><p><code>AJAXXMLServer.java</code><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line">public <span class="class"><span class="keyword">class</span> <span class="title">AJAXXMLServer</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span>&#123;</div><div class="line">    protected <span class="keyword">void</span> doPost(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse) throws ServletException, IOException &#123;</div><div class="line">        doGet(httpServletRequest, httpServletResponse);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    protected <span class="keyword">void</span> doGet(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse) throws ServletException, IOException &#123;</div><div class="line">        <span class="keyword">try</span>&#123;</div><div class="line">            <span class="comment">//修改点1111111111111111111111111111111----响应的Content-Type必须是text/xml</span></div><div class="line">            httpServletResponse.setContentType(<span class="string">"text/xml;charset=utf-8"</span>);</div><div class="line"></div><div class="line">            PrintWriter out = httpServletResponse.getWriter();</div><div class="line">            <span class="comment">//1.取参数</span></div><div class="line">            <span class="built_in">String</span> old = httpServletRequest.getParameter(<span class="string">"name"</span>);</div><div class="line">            <span class="comment">//修改点2222222222222222222222222222222-----返回的数据需要拼装成xml格式</span></div><div class="line">            StringBuilder builder = <span class="keyword">new</span> StringBuilder();</div><div class="line">            builder.append(<span class="string">"&lt;message&gt;"</span>);</div><div class="line">            <span class="comment">//2.检查参数是否有问题</span></div><div class="line">            <span class="keyword">if</span>(old == <span class="literal">null</span> || old.length() == <span class="number">0</span>)&#123;</div><div class="line">                builder.append(<span class="string">"用户名不能为空"</span>).append(<span class="string">"&lt;/message&gt;"</span>);</div><div class="line">            &#125; <span class="keyword">else</span>&#123;</div><div class="line">                <span class="comment">//3.校验操作</span></div><div class="line">                <span class="built_in">String</span> name = old;</div><div class="line"></div><div class="line">                <span class="keyword">if</span>(name.equals(<span class="string">"wangxingkui"</span>))&#123;</div><div class="line">                    <span class="comment">//4。和传统应用不同之处。这一步需要将用户感兴趣的数据返回给页面段，而不是将一个新的页面发送给用户</span></div><div class="line">                    <span class="comment">//写法没有变化，本质发生了改变</span></div><div class="line">                    builder.append(<span class="string">"用户名["</span> + name + <span class="string">"]已经存在，请使用其他用户名"</span>).append(<span class="string">"&lt;/message&gt;"</span>);</div><div class="line">                &#125; <span class="keyword">else</span>&#123;</div><div class="line">                    builder.append(<span class="string">"用户名["</span> + name + <span class="string">"]尚未存在，可以使用该用户名注册"</span>).append(<span class="string">"&lt;/message&gt;"</span>);</div><div class="line">                &#125;</div><div class="line">                out.println(builder.toString());</div><div class="line">                System.out.println(builder.toString());</div><div class="line"></div><div class="line">            &#125;</div><div class="line">        &#125; <span class="keyword">catch</span>(Exception e)&#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><code>verifyxml.js</code><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">callback</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">//alert(xmlhttp.readyState);</span></div><div class="line">    <span class="comment">// -----------------5.接收响应数据-----------------</span></div><div class="line">    <span class="comment">//判断对象的状态是交互完成</span></div><div class="line">    <span class="keyword">if</span> (xmlhttp.readyState == <span class="number">4</span>) &#123;</div><div class="line">        <span class="comment">//判断http的交互是否成功</span></div><div class="line">        <span class="keyword">if</span> (xmlhttp.status == <span class="number">200</span>) &#123;</div><div class="line">            <span class="comment">//使用responseXML的方式来接收XML数据对象的DOM对象</span></div><div class="line">            <span class="keyword">var</span> domObj = xmlhttp.responseXML;</div><div class="line">            <span class="keyword">if</span> (domObj) &#123;</div><div class="line">                <span class="comment">//&lt;message&gt;123123123&lt;/message&gt;</span></div><div class="line">                <span class="comment">//dom中利用getElementsByTagName可以根据标签名来获取元素节点，返回的是一个数组</span></div><div class="line">                <span class="keyword">var</span> messageNodes = domObj.getElementsByTagName(<span class="string">"message"</span>);</div><div class="line">                <span class="keyword">if</span> (messageNodes.length &gt; <span class="number">0</span>) &#123;</div><div class="line">                    <span class="comment">//获取message节点中的文本内容</span></div><div class="line">                    <span class="comment">//message标签中的文本在dom中是message标签所对应的元素节点的字节点，firstChild可以获取到当前节点的第一个子节点</span></div><div class="line">                    <span class="comment">//通过以下方式就可以获取到文本内容所对应的节点</span></div><div class="line">                    <span class="keyword">var</span> textNode = messageNodes[<span class="number">0</span>].firstChild;</div><div class="line">                    <span class="comment">//对于文本节点来说，可以通过nodeValue的方式返回文本节点的文本内容</span></div><div class="line">                    <span class="keyword">var</span> responseMessage = textNode.nodeValue;</div><div class="line"></div><div class="line">                    <span class="comment">//将数据显示在页面上</span></div><div class="line">                    <span class="comment">//通过dom的方式找到div标签所对应的元素节点</span></div><div class="line">                    <span class="keyword">var</span> divNode = <span class="built_in">document</span>.getElementById(<span class="string">"result"</span>);</div><div class="line">                    <span class="comment">//设置元素节点中的html内容</span></div><div class="line">                    divNode.innerHTML = responseMessage;</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    alert(<span class="string">"XML数据格式错误，原始文本内容为："</span> + xmlhttp.responseText);</div><div class="line">                &#125;</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                alert(<span class="string">"XML数据格式错误，原始文本内容为："</span> + xmlhttp.responseText);</div><div class="line">            &#125;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            alert(<span class="string">"出错了！！！"</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h1 id="jQuery处理XML数据"><a href="#jQuery处理XML数据" class="headerlink" title="jQuery处理XML数据"></a>jQuery处理XML数据</h1><p><code>verifyjqueryxml.js</code><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">verify</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="comment">// 1.获取文本框中的内容</span></div><div class="line">    <span class="comment">// document.getElementById("userName");  dom的方式</span></div><div class="line">    <span class="keyword">var</span> jqueryObj = $(<span class="string">"#userName"</span>);</div><div class="line">    <span class="comment">// 获取节点的值</span></div><div class="line">    <span class="keyword">var</span> userName = jqueryObj.val();</div><div class="line"></div><div class="line">    <span class="comment">// 2.将文本框中的数据发送给服务器段的servlet</span></div><div class="line">    <span class="keyword">var</span> obj = &#123;<span class="attr">name</span>:<span class="string">"123"</span>,<span class="attr">age</span>:<span class="number">20</span>&#125;;</div><div class="line">    <span class="comment">// 使用jquery的XMLHTTPrequest对象get请求的封装</span></div><div class="line">    $.ajax(&#123;</div><div class="line">        <span class="attr">type</span>: <span class="string">"POST"</span>,               <span class="comment">//http请求方式</span></div><div class="line">        url: <span class="string">"AJAXXMLServer"</span>,       <span class="comment">//服务器端url地址（必须）</span></div><div class="line">        data: <span class="string">"name="</span> + userName,   <span class="comment">//发送给服务器端的数据</span></div><div class="line">        dataType: <span class="string">"xml"</span>,            <span class="comment">//告诉JQuery返回的数据格式</span></div><div class="line">        success: callback           <span class="comment">//定义交互完成，并且服务器正确返回数据时调用的回调函数</span></div><div class="line">    &#125;);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//回调函数</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">callback</span>(<span class="params">data</span>) </span>&#123;</div><div class="line">    <span class="comment">// 3.接收服务器端返回的数据</span></div><div class="line">    <span class="comment">// 需要将data这个dom对象中的数据解析出来</span></div><div class="line">    <span class="comment">// 首先需要将dom的对象转换成JQuery的对象</span></div><div class="line">    <span class="keyword">var</span> jqueryObj = $(data);</div><div class="line">    <span class="comment">// 获取message节点</span></div><div class="line">    <span class="keyword">var</span> message = jqueryObj.children();</div><div class="line">    <span class="comment">// 获取文本内容</span></div><div class="line">    <span class="keyword">var</span> text = message.text();</div><div class="line">    <span class="comment">// 4.将服务器段返回的数据动态的显示在页面上</span></div><div class="line">    <span class="comment">//找到保存结果信息的节点</span></div><div class="line">    <span class="keyword">var</span> resultObj = $(<span class="string">"#result"</span>);</div><div class="line">    <span class="comment">//动态的改变页面中div节点中的内容</span></div><div class="line">    resultObj.html(text);</div><div class="line">    alert(<span class="string">""</span>);</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">// 由于从文本格式变成xml格式所以就不能就这样写了</span></div><div class="line">    <span class="comment">// var resultObj = $("#result");</span></div><div class="line">    <span class="comment">// resultObj.html(data);</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h1 id="解决XHR与图片缓存问题"><a href="#解决XHR与图片缓存问题" class="headerlink" title="解决XHR与图片缓存问题"></a>解决XHR与图片缓存问题</h1><p><code>verify.js</code><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 给url地址增加时间戳，骗过浏览器，不读取缓存</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">convertURL</span>(<span class="params">url</span>) </span>&#123;</div><div class="line">    <span class="comment">//获取时间戳</span></div><div class="line">    <span class="keyword">var</span> timstamp = (<span class="keyword">new</span> <span class="built_in">Date</span>()).valueOf();</div><div class="line">    <span class="comment">//将时间戳信息拼接到url上</span></div><div class="line">    <span class="keyword">if</span> (url.indexOf(<span class="string">"?"</span>) &gt;= <span class="number">0</span>) &#123;</div><div class="line">        url = url + <span class="string">"&amp;t="</span> + timstamp;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        url = url + <span class="string">"?t="</span> + timstamp;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> url;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h1 id="解决Ajax中文乱码与跨域访问"><a href="#解决Ajax中文乱码与跨域访问" class="headerlink" title="解决Ajax中文乱码与跨域访问"></a>解决Ajax中文乱码与跨域访问</h1><p>``<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AJAXServer</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span>&#123;</div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</div><div class="line">        doGet(httpServletRequest, httpServletResponse);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</div><div class="line">        <span class="keyword">try</span>&#123;</div><div class="line"><span class="comment">//            request.setCharacterEncoding("UTF-8");</span></div><div class="line"><span class="comment">//            response.setContentType("text/html;charset=gb18030");</span></div><div class="line"></div><div class="line">            httpServletResponse.setContentType(<span class="string">"text/html;charset=utf-8"</span>);</div><div class="line">            PrintWriter out = httpServletResponse.getWriter();</div><div class="line"></div><div class="line">            Integer inte = (Integer) httpServletRequest.getSession().getAttribute(<span class="string">"total"</span>);</div><div class="line">            <span class="keyword">int</span> temp = <span class="number">0</span>;</div><div class="line">            <span class="keyword">if</span> (inte == <span class="keyword">null</span>) &#123;</div><div class="line">                temp = <span class="number">1</span>;</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                temp = inte.intValue() + <span class="number">1</span>;</div><div class="line">            &#125;</div><div class="line">            httpServletRequest.getSession().setAttribute(<span class="string">"total"</span>,temp);</div><div class="line"></div><div class="line">            <span class="comment">//1.取参数</span></div><div class="line">            String old = httpServletRequest.getParameter(<span class="string">"name"</span>);</div><div class="line">            <span class="comment">//String name = new String(old.getBytes("iso8859-1"),"UTF-8");</span></div><div class="line">            String name = URLDecoder.decode(old,<span class="string">"UTF-8"</span>);</div><div class="line">            <span class="comment">//2.检查参数是否有问题</span></div><div class="line">            <span class="keyword">if</span>(old == <span class="keyword">null</span> || old.length() == <span class="number">0</span>)&#123;</div><div class="line">                out.println(<span class="string">"用户名不能为空"</span>);</div><div class="line">            &#125; <span class="keyword">else</span>&#123;</div><div class="line"><span class="comment">//                String name = URLDecoder.decode(old,"UTF-8");</span></div><div class="line"><span class="comment">//                byte[] by = old.getBytes("ISO8859-1");</span></div><div class="line"><span class="comment">//                String name = new String(by,"utf-8");</span></div><div class="line"><span class="comment">//                String name = URLDecoder.decode(old,"utf-8");</span></div><div class="line">                <span class="comment">//3.校验操作</span></div><div class="line"><span class="comment">//                String name = old;</span></div><div class="line">                <span class="keyword">if</span>(name.equals(<span class="string">"wangxingkui"</span>))&#123;</div><div class="line">                    <span class="comment">//4。和传统应用不同之处。这一步需要将用户感兴趣的数据返回给页面段，而不是将一个新的页面发送给用户</span></div><div class="line">                    <span class="comment">//写法没有变化，本质发生了改变</span></div><div class="line">                    out.println(<span class="string">"用户名["</span> + name + <span class="string">"]已经存在，请使用其他用户名, "</span> + temp);</div><div class="line">                &#125; <span class="keyword">else</span>&#123;</div><div class="line">                    out.println(<span class="string">"用户名["</span> + name + <span class="string">"]尚未存在，可以使用该用户名注册, "</span> + temp);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125; <span class="keyword">catch</span>(Exception e)&#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125; </div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><code>verify.js</code><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">verify</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">//解决中文乱码问题的方法1：页面端发出的数据作一次encodeURI，服务器端使用new String(old.getBytes("iso8859-1"),"UTF-8");</span></div><div class="line">    <span class="comment">//解决中文乱码问题的方法2：页面端发出的数据作两次encodeURI，服务器端使用URLDecoder.decode(old,"UTF-8")</span></div><div class="line">    <span class="keyword">var</span> url = <span class="string">"AJAXServer?name="</span> + <span class="built_in">encodeURI</span>(<span class="built_in">encodeURI</span>($(<span class="string">"#userName"</span>).val()));</div><div class="line">    url = convertURL(url);</div><div class="line">    $.get(url,<span class="literal">null</span>,<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</div><div class="line">        $(<span class="string">"#result"</span>).html(data);</div><div class="line">&#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h1 id="jQuery的Json支持"><a href="#jQuery的Json支持" class="headerlink" title="jQuery的Json支持"></a>jQuery的Json支持</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getInfo</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    $.get(<span class="string">"GetStockInfo"</span>, <span class="literal">null</span>, <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</div><div class="line">        ......</div><div class="line">    &#125;,<span class="string">"json"</span>)  <span class="comment">// 直接在这里加上json就可以将数据转换成json格式  </span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://patrickphang.github.io/2017/02/10/mapper层测试/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Patrick Phang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/casillas.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Patrick's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/02/10/mapper层测试/" itemprop="url">
                  mapper层单元测试
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-02-10T20:20:17+08:00">
                2017-02-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JavaWeb/" itemprop="url" rel="index">
                    <span itemprop="name">JavaWeb</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/02/10/mapper层测试/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/02/10/mapper层测试/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2017/02/10/mapper层测试/" class="leancloud_visitors" data-flag-title="mapper层单元测试">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="po层"><a href="#po层" class="headerlink" title="po层"></a>po层</h1><p><code>User.java</code><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> po;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</div><div class="line">    <span class="keyword">private</span> String username;</div><div class="line">    <span class="keyword">private</span> String password;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> id;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.id = id;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUsername</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> username;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUsername</span><span class="params">(String username)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.username = username;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> password;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(String password)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.password = password;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h1 id="mapper层"><a href="#mapper层" class="headerlink" title="mapper层"></a>mapper层</h1><p><code>UserMapper.java</code><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> mapper;</div><div class="line"><span class="keyword">import</span> po.User;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</div><div class="line">    <span class="function">User <span class="title">getUserByName</span><span class="params">(String username)</span></span>;</div><div class="line">    <span class="function">User <span class="title">getUserById</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">insertUser</span><span class="params">(User user)</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><code>UserMapper.xml</code><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</div><div class="line"><span class="meta">&lt;!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" &gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"mapper.UserMapper"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">"po.User"</span> <span class="attr">id</span>=<span class="string">"userMap"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"id"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"username"</span> <span class="attr">column</span>=<span class="string">"username"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"password"</span> <span class="attr">column</span>=<span class="string">"password"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- select标签的id值对应Mapper类中方法名 --&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"getUserByName"</span> <span class="attr">parameterType</span>=<span class="string">"string"</span> <span class="attr">resultMap</span>=<span class="string">"userMap"</span>&gt;</span></div><div class="line">        <span class="comment">&lt;!-- 此处写sql语句,#&#123;Mapper类传入的参数&#125; --&gt;</span></div><div class="line">        select * from T_USER where username = #&#123;username&#125;</div><div class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"getUserById"</span> <span class="attr">parameterType</span>=<span class="string">"int"</span> <span class="attr">resultMap</span>=<span class="string">"userMap"</span>&gt;</span></div><div class="line">        SELECT * FROM user WHERE id = #&#123;id&#125;</div><div class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"insertUser"</span> <span class="attr">parameterType</span>=<span class="string">"po.User"</span> <span class="attr">useGeneratedKeys</span>=<span class="string">"true"</span> <span class="attr">keyProperty</span>=<span class="string">"id"</span>&gt;</span> <span class="comment">&lt;!--插入时获取自增主键id--&gt;</span></div><div class="line">        insert into user (id, username, password)</div><div class="line">        values (#&#123;id,jdbcType=INTEGER&#125;, #&#123;username,jdbcType=VARCHAR&#125;, #&#123;password,jdbcType=VARCHAR&#125;)</div><div class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h1 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h1><p><code>UserMapperTest.java</code><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> mapper;</div><div class="line"><span class="keyword">import</span> org.junit.Before;</div><div class="line"><span class="keyword">import</span> org.junit.Test;</div><div class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</div><div class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</div><div class="line"><span class="keyword">import</span> po.User;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserMapperTest</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> ApplicationContext applicationContext;</div><div class="line">    <span class="keyword">private</span> UserMapper userMapper;</div><div class="line"></div><div class="line">    <span class="meta">@Before</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUp</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        <span class="comment">// 创建spring容器</span></div><div class="line">        applicationContext = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"classpath:spring/applicationContext.xml"</span>);</div><div class="line">        userMapper = (UserMapper) applicationContext.getBean(<span class="string">"userMapper"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testGetUserById</span><span class="params">()</span> </span>&#123;</div><div class="line">        User user = userMapper.getUserById(<span class="number">1</span>);</div><div class="line">        System.out.println(user);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testInsertUser</span><span class="params">()</span></span>&#123;</div><div class="line">        User user = <span class="keyword">new</span> User();</div><div class="line">        user.setUsername(<span class="string">"user8"</span>);</div><div class="line">        user.setPassword(<span class="string">"psw8"</span>);</div><div class="line">        userMapper.insert(user);</div><div class="line">        System.out.println(user);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://patrickphang.github.io/2017/02/09/SSM框架整合/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Patrick Phang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/casillas.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Patrick's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/02/09/SSM框架整合/" itemprop="url">
                  SSM框架整合
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-02-09T16:20:17+08:00">
                2017-02-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JavaWeb/" itemprop="url" rel="index">
                    <span itemprop="name">JavaWeb</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/02/09/SSM框架整合/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/02/09/SSM框架整合/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2017/02/09/SSM框架整合/" class="leancloud_visitors" data-flag-title="SSM框架整合">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h1 id="db-properties和log4j-properties"><a href="#db-properties和log4j-properties" class="headerlink" title="db.properties和log4j.properties"></a><code>db.properties</code>和<code>log4j.properties</code></h1><p>这里是对数据库的参数进行一些配置，为了防止硬编码不利于系统的优化。（在与springmvc整合后，由spring管理）</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/02/09/SSM框架整合/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://patrickphang.github.io/2017/02/08/spring2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Patrick Phang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/casillas.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Patrick's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/02/08/spring2/" itemprop="url">
                  Spring（三）
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-02-08T14:43:11+08:00">
                2017-02-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JavaWeb/" itemprop="url" rel="index">
                    <span itemprop="name">JavaWeb</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/02/08/spring2/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/02/08/spring2/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2017/02/08/spring2/" class="leancloud_visitors" data-flag-title="Spring（三）">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="基于aspectj的注解aop操作"><a href="#基于aspectj的注解aop操作" class="headerlink" title="基于aspectj的注解aop操作"></a>基于aspectj的注解aop操作</h1><h2 id="使用注解方式实现aop操作"><a href="#使用注解方式实现aop操作" class="headerlink" title="使用注解方式实现aop操作"></a>使用注解方式实现aop操作</h2><ol>
<li><p>创建对象<br><code>Book.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> cn.itcast.aop;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Book</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">()</span> </span>&#123;</div><div class="line">		System.out.println(<span class="string">"add............."</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>在spring核心配置文件中，开启aop操作<br><code>bean.xml</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></div><div class="line">    <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line">    <span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span> <span class="attr">xsi:schemaLocation</span>=<span class="string">"</span></div><div class="line">        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</div><div class="line">        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd"&gt;</div><div class="line"></div><div class="line">	<span class="comment">&lt;!-- 开启aop操作 --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:aspectj-autoproxy</span>&gt;</span></div><div class="line"></div><div class="line">	<span class="comment">&lt;!-- 1  配置对象 --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"book"</span> <span class="attr">class</span>=<span class="string">"cn.itcast.aop.Book"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"myBook"</span> <span class="attr">class</span>=<span class="string">"cn.itcast.aop.MyBook"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>在增强类上面使用注解完成aop操作<br><code>MyBook.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> cn.itcast.aop;</div><div class="line"><span class="meta">@Aspect</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyBook</span> </span>&#123;</div><div class="line">	<span class="comment">// 在方法上面使用注解完成增强配置</span></div><div class="line">	<span class="meta">@Before</span>(value=<span class="string">"execution(* cn.itcast.aop.Book.*(..))"</span>)</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before1</span><span class="params">()</span> </span>&#123;</div><div class="line">		System.out.println(<span class="string">"before.............."</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<p><code>TestAop.java</code><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> cn.itcast.aop;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestAop</span> </span>&#123;</div><div class="line">	<span class="meta">@Test</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDemo</span><span class="params">()</span> </span>&#123;</div><div class="line">		ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"bean.xml"</span>);</div><div class="line">		Book book = (Book) context.getBean(<span class="string">"book"</span>);</div><div class="line">		book.add();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h1 id="spring的jdbcTemplate操作"><a href="#spring的jdbcTemplate操作" class="headerlink" title="spring的jdbcTemplate操作"></a>spring的jdbcTemplate操作</h1><h2 id="spring框架一站式框架"><a href="#spring框架一站式框架" class="headerlink" title="spring框架一站式框架"></a>spring框架一站式框架</h2><p>（1）针对javaee三层，每一层都有解决技术<br>（2）在dao层，使用 jdbcTemplate</p>
<p>spring对不同的持久化层技术都进行封装：<br><img src="http://p1.bpimg.com/567571/4021824f43fab3a1.png" alt="">  </p>
<p>jdbcTemplate对jdbc进行封装，它的使用和dbutils使用很相似，都数据库进行crud操作。</p>
<h1 id="spring配置连接池"><a href="#spring配置连接池" class="headerlink" title="spring配置连接池"></a>spring配置连接池</h1><h2 id="spring配置c3p0连接池"><a href="#spring配置c3p0连接池" class="headerlink" title="spring配置c3p0连接池"></a>spring配置c3p0连接池</h2><ol>
<li>导入jar包</li>
<li>创建spring配置文件，配置连接池<br>代码实现：  <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> com.mchange.v2.c3p0.ComboPooledDataSource;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JdbcTemplateDemo1</span> </span>&#123;</div><div class="line">    ComboPooledDataSource dataSource = <span class="keyword">new</span> ComboPooledDataSource();</div><div class="line">    dataSource.setDriverClass(<span class="string">"com.mysql.jdbc.Driver"</span>);</div><div class="line">    dataSource.setJdbcUrl(<span class="string">"jdbc:mysql:///spring_day03"</span>);</div><div class="line">    dataSource.setUser(<span class="string">"root"</span>);</div><div class="line">    dataSource.setPassword(<span class="string">"123"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<p>配置实现：<br><code>bean.xml</code><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- 配置c3p0连接池 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"com.mchange.v2.c3p0.ComboPooledDataSource"</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- 注入属性值 --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClass"</span> <span class="attr">value</span>=<span class="string">"com.mysql.jdbc.Driver"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUrl"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql:///spring_day03"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"user"</span> <span class="attr">value</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h2 id="dao使用jdbcTemplate"><a href="#dao使用jdbcTemplate" class="headerlink" title="dao使用jdbcTemplate"></a>dao使用jdbcTemplate</h2><ol>
<li><p>创建service和dao，配置service和dao对象，在service注入dao对象<br><code>bean.xml</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- 创建service和dao对象，在service注入dao对象 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"userService"</span> <span class="attr">class</span>=<span class="string">"cn.itcast.c3p0.UserService"</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- 注入dao对象 --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"userDao"</span> <span class="attr">ref</span>=<span class="string">"userDao"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"userDao"</span> <span class="attr">class</span>=<span class="string">"cn.itcast.c3p0.UserDao"</span>&gt;</span></div><div class="line">        <span class="comment">&lt;!-- 注入jdbcTemplate对象 --&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcTemplate"</span> <span class="attr">ref</span>=<span class="string">"jdbcTemplate"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>创建jdbcTemplate对象，把模板对象注入到dao里面<br><code>UserDao.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDao</span> </span>&#123;</div><div class="line">	<span class="comment">//得到JdbcTemplate对象</span></div><div class="line">	<span class="keyword">private</span> JdbcTemplate jdbcTemplate;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setJdbcTemplate</span><span class="params">(JdbcTemplate jdbcTemplate)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.jdbcTemplate = jdbcTemplate;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">//添加操作</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="comment">// 代码实现：创建jdbcTemplate对象</span></div><div class="line">		<span class="comment">// JdbcTemplate jdbcTemplate = new JdbcTemplate(dataSource);</span></div><div class="line">		String sql = <span class="string">"insert into user values(?,?)"</span>;</div><div class="line">		jdbcTemplate.update(sql, <span class="string">"李雷"</span>,<span class="string">"520"</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>在jdbcTemplate对象里面注入dataSource<br><code>bean.xml</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- 创建jdbcTemplate对象 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"jdbcTemplate"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.core.JdbcTemplate"</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- 把dataSource传递到模板对象里面 --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="spring事务管理"><a href="#spring事务管理" class="headerlink" title="spring事务管理"></a>spring事务管理</h1><h2 id="spring事务管理两种方式"><a href="#spring事务管理两种方式" class="headerlink" title="spring事务管理两种方式"></a>spring事务管理两种方式</h2><ol>
<li>编程式事务管理（不用）  </li>
<li>声明式事务管理<br> （1）基于xml配置文件实现<br> （2）基于注解实现（最简单方便）  <h2 id="spring事务管理的api介绍"><a href="#spring事务管理的api介绍" class="headerlink" title="spring事务管理的api介绍"></a>spring事务管理的api介绍</h2>spring针对不同的dao层框架，提供接口不同的实现类<br><img src="http://i1.piimg.com/567571/c279bd45d32074be.png" alt=""><h2 id="声明式事务管理（xml配置）"><a href="#声明式事务管理（xml配置）" class="headerlink" title="声明式事务管理（xml配置）"></a>声明式事务管理（xml配置）</h2></li>
<li>创建service和dao类，完成注入关系<br><code>OrdersDao.java</code><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OrdersDao</span> </span>&#123;</div><div class="line">	<span class="comment">//注入jdbcTemplate</span></div><div class="line">	<span class="keyword">private</span> JdbcTemplate jdbcTemplate;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setJdbcTemplate</span><span class="params">(JdbcTemplate jdbcTemplate)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.jdbcTemplate = jdbcTemplate;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">// 做对数据库操作的方法，不写业务操作</span></div><div class="line">	<span class="comment">// 小王少钱的方法</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">lessMoney</span><span class="params">()</span> </span>&#123;</div><div class="line">		String sql = <span class="string">"update account set salary=salary-? where username=?"</span>;</div><div class="line">		jdbcTemplate.update(sql, <span class="number">1000</span>,<span class="string">"小王"</span>);</div><div class="line">	&#125;</div><div class="line">	<span class="comment">// 小马多钱的方法</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">moreMoney</span><span class="params">()</span> </span>&#123;</div><div class="line">		String sql = <span class="string">"update account set salary=salary+? where username=?"</span>;</div><div class="line">		jdbcTemplate.update(sql, <span class="number">1000</span>,<span class="string">"小马"</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<p><code>OrdersService.java</code><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OrdersService</span> </span>&#123;</div><div class="line">	<span class="keyword">private</span> OrdersDao ordersDao;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setOrdersDao</span><span class="params">(OrdersDao ordersDao)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.ordersDao = ordersDao;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">//调用dao的方法</span></div><div class="line">	<span class="comment">//业务逻辑层，写转账业务</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accountMoney</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="comment">//小王少1000</span></div><div class="line">		ordersDao.lessMoney();</div><div class="line">		<span class="comment">//出现异常，应该进行回滚操作</span></div><div class="line">		<span class="keyword">int</span> i = <span class="number">10</span>/<span class="number">0</span>;</div><div class="line">		<span class="comment">//小马多1000</span></div><div class="line">		ordersDao.moreMoney();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><code>bean.xml</code><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- 配置c3p0连接池 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"com.mchange.v2.c3p0.ComboPooledDataSource"</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- 注入属性值 --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClass"</span> <span class="attr">value</span>=<span class="string">"com.mysql.jdbc.Driver"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUrl"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql:///spring_day03"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"user"</span> <span class="attr">value</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"ordersService"</span> <span class="attr">class</span>=<span class="string">"cn.itcast.service.OrdersService"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"ordersDao"</span> <span class="attr">ref</span>=<span class="string">"ordersDao"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"ordersDao"</span> <span class="attr">class</span>=<span class="string">"cn.itcast.dao.OrdersDao"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcTemplate"</span> <span class="attr">ref</span>=<span class="string">"jdbcTemplate"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"jdbcTemplate"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.core.JdbcTemplate"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div></pre></td></tr></table></figure></p>
<ol>
<li><p>配置事务管理器</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- 第一步 配置事务管理器 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"transactionManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- 注入dataSource，知道对哪个数据库进行操作 --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>配置事务增强</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- 第二步 配置事务增强 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">"txadvice"</span> <span class="attr">transaction-manager</span>=<span class="string">"transactionManager"</span>&gt;</span> <span class="comment">&lt;!-- transaction-manager指定事务管理器id --&gt;</span></div><div class="line">    <span class="comment">&lt;!-- 做事务操作 --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></div><div class="line">        <span class="comment">&lt;!-- 设置进行事务操作的方法匹配规则  --&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"account*"</span> <span class="attr">propagation</span>=<span class="string">"REQUIRED"</span>/&gt;</span> <span class="comment">&lt;!-- 如果方法都以account开头则都进行操作 --&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>配置切面</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- 第三步 配置切面 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- 切入点 --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">expression</span>=<span class="string">"execution(* cn.itcast.service.OrdersService.*(..))"</span> <span class="attr">id</span>=<span class="string">"pointcut1"</span>/&gt;</span></div><div class="line">    <span class="comment">&lt;!-- 切面 --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">"txadvice"</span> <span class="attr">pointcut-ref</span>=<span class="string">"pointcut1"</span>/&gt;</span> <span class="comment">&lt;!-- 指定哪个增强用在哪个切入点上 --&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></div><div class="line">	<span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line">	<span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></div><div class="line">	<span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span></div><div class="line">	<span class="attr">xmlns:tx</span>=<span class="string">"http://www.springframework.org/schema/tx"</span></div><div class="line">	<span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></div><div class="line">	http://www.springframework.org/schema/beans/spring-beans.xsd</div><div class="line">	http://www.springframework.org/schema/context</div><div class="line">	http://www.springframework.org/schema/context/spring-context.xsd</div><div class="line">	http://www.springframework.org/schema/aop</div><div class="line">	http://www.springframework.org/schema/aop/spring-aop.xsd</div><div class="line">	http://www.springframework.org/schema/tx</div><div class="line">	http://www.springframework.org/schema/tx/spring-tx.xsd"&gt;</div><div class="line"></div><div class="line">	<span class="comment">&lt;!-- 配置c3p0连接池 --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"com.mchange.v2.c3p0.ComboPooledDataSource"</span>&gt;</span></div><div class="line">		<span class="comment">&lt;!-- 注入属性值 --&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClass"</span> <span class="attr">value</span>=<span class="string">"com.mysql.jdbc.Driver"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUrl"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql:///spring_day03"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"user"</span> <span class="attr">value</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"></div><div class="line">	<span class="comment">&lt;!-- 第一步 配置事务管理器 --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"transactionManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span>&gt;</span></div><div class="line">		<span class="comment">&lt;!-- 注入dataSource --&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"></div><div class="line">	<span class="comment">&lt;!-- 第二步 配置事务增强 --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">"txadvice"</span> <span class="attr">transaction-manager</span>=<span class="string">"transactionManager"</span>&gt;</span></div><div class="line">		<span class="comment">&lt;!-- 做事务操作 --&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></div><div class="line">			<span class="comment">&lt;!-- 设置进行事务操作的方法匹配规则  --&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"account*"</span> <span class="attr">propagation</span>=<span class="string">"REQUIRED"</span>/&gt;</span></div><div class="line">			<span class="comment">&lt;!-- &lt;tx:method name="insert*" /&gt; --&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></div><div class="line"></div><div class="line">	<span class="comment">&lt;!-- 第三步 配置切面 --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></div><div class="line">		<span class="comment">&lt;!-- 切入点 --&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">expression</span>=<span class="string">"execution(* cn.itcast.service.OrdersService.*(..))"</span> <span class="attr">id</span>=<span class="string">"pointcut1"</span>/&gt;</span></div><div class="line">		<span class="comment">&lt;!-- 切面 --&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">"txadvice"</span> <span class="attr">pointcut-ref</span>=<span class="string">"pointcut1"</span>/&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></div><div class="line"></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"ordersService"</span> <span class="attr">class</span>=<span class="string">"cn.itcast.service.OrdersService"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"ordersDao"</span> <span class="attr">ref</span>=<span class="string">"ordersDao"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"ordersDao"</span> <span class="attr">class</span>=<span class="string">"cn.itcast.dao.OrdersDao"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcTemplate"</span> <span class="attr">ref</span>=<span class="string">"jdbcTemplate"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"jdbcTemplate"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.core.JdbcTemplate"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="声明式事务管理（注解）"><a href="#声明式事务管理（注解）" class="headerlink" title="声明式事务管理（注解）"></a>声明式事务管理（注解）</h2><ol>
<li><p>配置事务管理器</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- 第一步配置事务管理器 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"transactionManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>配置事务注解</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- 第二步 开启事务注解 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">tx:annotation-driven</span> <span class="attr">transaction-manager</span>=<span class="string">"transactionManager"</span>/&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>在要使用事务的方法所在类上面添加注解<br><code>OrdersService.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Transactional</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OrdersService</span> </span>&#123;</div><div class="line">	<span class="keyword">private</span> OrdersDao ordersDao;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setOrdersDao</span><span class="params">(OrdersDao ordersDao)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.ordersDao = ordersDao;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">//调用dao的方法</span></div><div class="line">	<span class="comment">//业务逻辑层，写转账业务</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accountMoney</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="comment">//小王少1000</span></div><div class="line">		ordersDao.lessMoney();</div><div class="line">		<span class="comment">//出现异常</span></div><div class="line">		<span class="keyword">int</span> i = <span class="number">10</span>/<span class="number">0</span>;</div><div class="line">		<span class="comment">//小马多1000</span></div><div class="line">		ordersDao.moreMoney();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></div><div class="line">	<span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line">	<span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></div><div class="line">	<span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span></div><div class="line">	<span class="attr">xmlns:tx</span>=<span class="string">"http://www.springframework.org/schema/tx"</span></div><div class="line">	<span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></div><div class="line">	http://www.springframework.org/schema/beans/spring-beans.xsd</div><div class="line">	http://www.springframework.org/schema/context</div><div class="line">	http://www.springframework.org/schema/context/spring-context.xsd</div><div class="line">	http://www.springframework.org/schema/aop</div><div class="line">	http://www.springframework.org/schema/aop/spring-aop.xsd</div><div class="line">	http://www.springframework.org/schema/tx</div><div class="line">	http://www.springframework.org/schema/tx/spring-tx.xsd"&gt;</div><div class="line"></div><div class="line">	<span class="comment">&lt;!-- 配置c3p0连接池 --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"com.mchange.v2.c3p0.ComboPooledDataSource"</span>&gt;</span></div><div class="line">		<span class="comment">&lt;!-- 注入属性值 --&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClass"</span> <span class="attr">value</span>=<span class="string">"com.mysql.jdbc.Driver"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUrl"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql:///spring_day03"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"user"</span> <span class="attr">value</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"></div><div class="line">	<span class="comment">&lt;!-- 第一步配置事务管理器 --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"transactionManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"></div><div class="line">	<span class="comment">&lt;!-- 第二步 开启事务注解 --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">tx:annotation-driven</span> <span class="attr">transaction-manager</span>=<span class="string">"transactionManager"</span>/&gt;</span></div><div class="line"></div><div class="line"></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"ordersService"</span> <span class="attr">class</span>=<span class="string">"cn.itcast.service.OrdersService"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"ordersDao"</span> <span class="attr">ref</span>=<span class="string">"ordersDao"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"ordersDao"</span> <span class="attr">class</span>=<span class="string">"cn.itcast.dao.OrdersDao"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcTemplate"</span> <span class="attr">ref</span>=<span class="string">"jdbcTemplate"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"jdbcTemplate"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.core.JdbcTemplate"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://patrickphang.github.io/2017/02/08/spring1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Patrick Phang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/casillas.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Patrick's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/02/08/spring1/" itemprop="url">
                  Spring（二）
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-02-08T14:11:13+08:00">
                2017-02-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JavaWeb/" itemprop="url" rel="index">
                    <span itemprop="name">JavaWeb</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/02/08/spring1/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/02/08/spring1/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2017/02/08/spring1/" class="leancloud_visitors" data-flag-title="Spring（二）">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="bean管理-注解"><a href="#bean管理-注解" class="headerlink" title="bean管理(注解)"></a>bean管理(注解)</h1><p>导入jar包（基本的jar包+aop的jar包）<br>创建类，创建方法<br>创建spring配置文件，引入约束（第一天做ioc基本功能，引入约束beans + 做注解还要引入新的约束context schema）<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</div><div class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</div><div class="line">    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</div><div class="line">    xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xsi:schemaLocation=&quot;</div><div class="line">        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</div><div class="line">        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;</div><div class="line"></div><div class="line">	&lt;!-- 开启注解扫描</div><div class="line">		(1)到包里面扫描类、方法、属性上面是否有注解</div><div class="line">	--&gt;</div><div class="line">	&lt;context:component-scan base-package=&quot;cn.itcast&quot;&gt;&lt;/context:component-scan&gt;</div><div class="line"></div><div class="line">	&lt;!--</div><div class="line">		(2)只扫描属性上面的注解</div><div class="line">	 --&gt;</div><div class="line">	&lt;!-- &lt;context:annotation-config&gt;&lt;/context:annotation-config&gt; --&gt;</div><div class="line">&lt;/beans&gt;</div></pre></td></tr></table></figure></p>
<h1 id="注解创建对象"><a href="#注解创建对象" class="headerlink" title="注解创建对象"></a>注解创建对象</h1><p>在创建对象的类上面使用注解实现</p>
<pre><code><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> cn.itcast.anno;</div><div class="line"><span class="keyword">import</span> org.springframework.context.annotation.Scope;</div><div class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</div><div class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</div><div class="line"></div><div class="line"><span class="meta">@Service</span>(value=<span class="string">"user"</span>)   <span class="comment">// 相当于&lt;bean id="user" class=""/&gt;</span></div><div class="line"><span class="meta">@Scope</span>(value=<span class="string">"prototype"</span>)   <span class="comment">// 单实例还是多实例</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">()</span> </span>&#123;</div><div class="line">		System.out.println(<span class="string">"add..........."</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> cn.itcast.anno;</div><div class="line"><span class="keyword">import</span> org.junit.Test;</div><div class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</div><div class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestAnno</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="meta">@Test</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testUser</span><span class="params">()</span> </span>&#123;</div><div class="line">		ApplicationContext context =</div><div class="line">				<span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"bean1.xml"</span>);</div><div class="line">		User user = (User) context.getBean(<span class="string">"user"</span>);</div><div class="line">		System.out.println(user);</div><div class="line">		user.add();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</code></pre><p>创建对象有四个注解：\@Component \@Controller(web层) \@Service(业务层) \@Repository(持久层)，这四个注解功能是一样的，都创建对象，spring后续版本会对其增强  </p>
<p>创建对象是单实例还是多实例<code>@Scope(value=&quot;prototype&quot;)</code></p>
<h1 id="注解注入属性"><a href="#注解注入属性" class="headerlink" title="注解注入属性"></a>注解注入属性</h1><h2 id="创建dao和service对象"><a href="#创建dao和service对象" class="headerlink" title="创建dao和service对象"></a>创建dao和service对象</h2><pre><code><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> cn.itcast.anno;</div><div class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</div><div class="line"></div><div class="line"><span class="meta">@Component</span>(value=<span class="string">"userDao"</span>)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDao</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">()</span> </span>&#123;</div><div class="line">		System.out.println(<span class="string">"dao........."</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</code></pre><h2 id="在service类中定义dao类型属性"><a href="#在service类中定义dao类型属性" class="headerlink" title="在service类中定义dao类型属性"></a>在service类中定义dao类型属性</h2><ol>
<li><p>注入属性第一个注解方式(自动注入\@Autowired)</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> cn.itcast.anno;</div><div class="line"><span class="keyword">import</span> javax.annotation.Resource;</div><div class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</div><div class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</div><div class="line"></div><div class="line"><span class="meta">@Service</span>(value=<span class="string">"userService"</span>)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserService</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="comment">//得到dao对象</span></div><div class="line">	<span class="comment">//1 定义dao类型属性</span></div><div class="line">	<span class="comment">//在dao属性上面使用注解 完成对象注入</span></div><div class="line">	<span class="meta">@Autowired</span></div><div class="line">	<span class="keyword">private</span> UserDao userDao;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">()</span> </span>&#123;</div><div class="line">		System.out.println(<span class="string">"service..........."</span>);</div><div class="line">		userDao.add();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> cn.itcast.anno;</div><div class="line"><span class="keyword">import</span> org.junit.Test;</div><div class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</div><div class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestAnno</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="meta">@Test</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testService</span><span class="params">()</span> </span>&#123;</div><div class="line">		ApplicationContext context =</div><div class="line">				<span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"bean1.xml"</span>);</div><div class="line">		UserService userService = (UserService) context.getBean(<span class="string">"userService"</span>);</div><div class="line">		userService.add();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>注入属性第二个注解方式(\@Resource)</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> cn.itcast.anno;</div><div class="line"><span class="keyword">import</span> javax.annotation.Resource;</div><div class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</div><div class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</div><div class="line"></div><div class="line"><span class="meta">@Service</span>(value=<span class="string">"userService"</span>)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserService</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="meta">@Resource</span>(name=<span class="string">"userDao"</span>)</div><div class="line">	<span class="keyword">private</span> UserDao userDao;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">()</span> </span>&#123;</div><div class="line">		System.out.println(<span class="string">"service..........."</span>);</div><div class="line">		userDao.add();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="配置文件和注解混合使用"><a href="#配置文件和注解混合使用" class="headerlink" title="配置文件和注解混合使用"></a>配置文件和注解混合使用</h1><p>创建对象操作使用配置文件方式实现<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</div><div class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</div><div class="line">    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</div><div class="line">    xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xsi:schemaLocation=&quot;</div><div class="line">        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</div><div class="line">        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;</div><div class="line"></div><div class="line">	&lt;!-- 开启注解扫描</div><div class="line">		(1)到包里面扫描类、方法、属性上面是否有注解</div><div class="line">	--&gt;</div><div class="line">	&lt;context:component-scan base-package=&quot;cn.itcast&quot;&gt;&lt;/context:component-scan&gt;</div><div class="line"></div><div class="line">	&lt;!-- 配置对象 --&gt;</div><div class="line">	&lt;bean id=&quot;bookService&quot; class=&quot;cn.itcast.xmlanno.BookService&quot;&gt;&lt;/bean&gt;</div><div class="line">	&lt;bean id=&quot;bookDao&quot; class=&quot;cn.itcast.xmlanno.BookDao&quot;&gt;&lt;/bean&gt;</div><div class="line">	&lt;bean id=&quot;ordersDao&quot; class=&quot;cn.itcast.xmlanno.OrdersDao&quot;&gt;&lt;/bean&gt;</div><div class="line">&lt;/beans&gt;</div></pre></td></tr></table></figure></p>
<p>注入属性的操作使用注解方式实现<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> cn.itcast.xmlanno;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BookDao</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">book</span><span class="params">()</span> </span>&#123;</div><div class="line">		System.out.println(<span class="string">"bookdao.........."</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> cn.itcast.xmlanno;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OrdersDao</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">buy</span><span class="params">()</span> </span>&#123;</div><div class="line">		System.out.println(<span class="string">"ordersdao.........."</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> cn.itcast.xmlanno;</div><div class="line"></div><div class="line"><span class="keyword">import</span> javax.annotation.Resource;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BookService</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="comment">//得到bookdao和ordersdao对象</span></div><div class="line">	<span class="meta">@Resource</span>(name=<span class="string">"bookDao"</span>)</div><div class="line">	<span class="keyword">private</span> BookDao bookDao;</div><div class="line"></div><div class="line">	<span class="meta">@Resource</span>(name=<span class="string">"ordersDao"</span>)</div><div class="line">	<span class="keyword">private</span> OrdersDao ordersDao;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">()</span> </span>&#123;</div><div class="line">		System.out.println(<span class="string">"service........."</span>);</div><div class="line">		bookDao.book();</div><div class="line">		ordersDao.buy();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>junit测试<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> cn.itcast.xmlanno;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.junit.Test;</div><div class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</div><div class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestAnno</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="meta">@Test</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testService</span><span class="params">()</span> </span>&#123;</div><div class="line">		ApplicationContext context =</div><div class="line">				<span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"bean2.xml"</span>);</div><div class="line">		BookService bookService = (BookService) context.getBean(<span class="string">"bookService"</span>);</div><div class="line">		bookService.add();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h1 id="AOP概念"><a href="#AOP概念" class="headerlink" title="AOP概念"></a>AOP概念</h1><p>1 aop：面向切面（方面）编程，扩展功能不修改源代码实现</p>
<p>2  AOP采取横向抽取机制，取代了传统纵向继承体系重复性代码</p>
<p>3 aop底层使用动态代理实现<br>（1）第一种情况，有接口情况，使用动态代理创建接口实现类代理对象<br>（2）第二种情况，没有接口情况，使用动态代理创建类的子类代理对象</p>
<h1 id="AOP操作"><a href="#AOP操作" class="headerlink" title="AOP操作"></a>AOP操作</h1><p>导入jar包<br>增加aop约束<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</div><div class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</div><div class="line">    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</div><div class="line">    xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot; xsi:schemaLocation=&quot;</div><div class="line">        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</div><div class="line">        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd&quot;&gt;</div><div class="line">&lt;/beans&gt;</div></pre></td></tr></table></figure></p>
<h2 id="基于aspectj的xml配置"><a href="#基于aspectj的xml配置" class="headerlink" title="基于aspectj的xml配置"></a>基于aspectj的xml配置</h2><h3 id="使用表达式配置接入点"><a href="#使用表达式配置接入点" class="headerlink" title="使用表达式配置接入点"></a>使用表达式配置接入点</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">1 切入点：实际增强的方法</div><div class="line"></div><div class="line">2 常用的表达式</div><div class="line">execution(&lt;访问修饰符&gt;?&lt;返回类型&gt;&lt;方法名&gt;(&lt;参数&gt;)&lt;异常&gt;)</div><div class="line">（1）execution(* cn.itcast.aop.Book.add(..))          //要增强的方法的全路径.只有Book类中的add()方法增强  </div><div class="line">（2）execution(* cn.itcast.aop.Book.*(..))            //Book类中的所有方法都增强  </div><div class="line">（3）execution(* *.*(..))                             //所有类的所有方法  </div><div class="line">（4）匹配所有save开头的方法 execution(* save*(..))    //满足一定规则的方法都增强.save开头的方法都增强</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">&lt;!-- 1  配置对象 --&gt;</div><div class="line">&lt;bean id=&quot;book&quot; class=&quot;cn.itcast.aop.Book&quot;&gt;&lt;/bean&gt;</div><div class="line">&lt;bean id=&quot;myBook&quot; class=&quot;cn.itcast.aop.MyBook&quot;&gt;&lt;/bean&gt;</div><div class="line"></div><div class="line">&lt;!-- 2 配置aop操作 --&gt;</div><div class="line">&lt;aop:config&gt;</div><div class="line">	&lt;!-- 2.1 配置切入点</div><div class="line">		id=&quot;&quot;即给切入点起个名字</div><div class="line">	--&gt;</div><div class="line">	&lt;aop:pointcut expression=&quot;execution(* cn.itcast.aop.Book.*(..))&quot; id=&quot;pointcut1&quot;/&gt;</div><div class="line"></div><div class="line">	&lt;!-- 2.2 配置切面</div><div class="line">		把增强用到方法上面</div><div class="line">	--&gt;</div><div class="line">	&lt;aop:aspect ref=&quot;myBook&quot;&gt;</div><div class="line">		&lt;!-- 配置增强类型</div><div class="line">			method： 增强类里面使用哪个方法作为前置</div><div class="line">		--&gt;</div><div class="line">		&lt;aop:before method=&quot;before1&quot; pointcut-ref=&quot;pointcut1&quot;/&gt;</div><div class="line"></div><div class="line">		&lt;aop:after-returning method=&quot;after1&quot; pointcut-ref=&quot;pointcut1&quot;/&gt;</div><div class="line"></div><div class="line">		&lt;aop:around method=&quot;around1&quot; pointcut-ref=&quot;pointcut1&quot;/&gt;</div><div class="line">	&lt;/aop:aspect&gt;</div><div class="line">&lt;/aop:config&gt;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> cn.itcast.aop;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Book</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">()</span> </span>&#123;</div><div class="line">		System.out.println(<span class="string">"add..........."</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> cn.itcast.aop;</div><div class="line"><span class="keyword">import</span> org.aspectj.lang.ProceedingJoinPoint;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyBook</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before1</span><span class="params">()</span> </span>&#123;</div><div class="line">		System.out.println(<span class="string">"前置增强......"</span>);</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">after1</span><span class="params">()</span> </span>&#123;</div><div class="line">		System.out.println(<span class="string">"后置增强......"</span>);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">//环绕通知</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">around1</span><span class="params">(ProceedingJoinPoint proceedingJoinPoint)</span> <span class="keyword">throws</span> Throwable </span>&#123;</div><div class="line">		<span class="comment">//方法之前</span></div><div class="line">		System.out.println(<span class="string">"方法之前....."</span>);</div><div class="line">		<span class="comment">//执行被增强的方法</span></div><div class="line">		proceedingJoinPoint.proceed();</div><div class="line">		<span class="comment">//方法之后</span></div><div class="line">		System.out.println(<span class="string">"方法之后....."</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> cn.itcast.aop;</div><div class="line"><span class="keyword">import</span> org.junit.Test;</div><div class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</div><div class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestAnno</span> </span>&#123;</div><div class="line">	<span class="meta">@Test</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testService</span><span class="params">()</span> </span>&#123;</div><div class="line">		ApplicationContext context =</div><div class="line">				<span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"bean3.xml"</span>);</div><div class="line">		Book book = (Book) context.getBean(<span class="string">"book"</span>);</div><div class="line">		book.add();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="基于aspectj的注解方式"><a href="#基于aspectj的注解方式" class="headerlink" title="基于aspectj的注解方式"></a>基于aspectj的注解方式</h2><p>使用配置文件创建对象<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</div><div class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</div><div class="line">    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</div><div class="line">    xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot; xsi:schemaLocation=&quot;</div><div class="line">        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</div><div class="line">        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd&quot;&gt;</div><div class="line"></div><div class="line">	&lt;!-- 开启aop操作 --&gt;</div><div class="line">	&lt;aop:aspectj-autoproxy&gt;&lt;/aop:aspectj-autoproxy&gt;</div><div class="line"></div><div class="line">	&lt;!-- 1  配置对象 --&gt;</div><div class="line">	&lt;bean id=&quot;book&quot; class=&quot;cn.itcast.aop.Book&quot;&gt;&lt;/bean&gt;</div><div class="line">	&lt;bean id=&quot;myBook&quot; class=&quot;cn.itcast.aop.MyBook&quot;&gt;&lt;/bean&gt;</div><div class="line"></div><div class="line">&lt;/beans&gt;</div></pre></td></tr></table></figure></p>
<p>在spring核心配置文件中，开启aop操作<br><code>&lt;aop:aspectj-autoproxy&gt;&lt;/aop:aspectj-autoproxy&gt;</code></p>
<p>在增强类上面使用注解完成aop操作<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> cn.itcast.aop;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Book</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">()</span> </span>&#123;</div><div class="line">		System.out.println(<span class="string">"add............."</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> cn.itcast.aop;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Aspect;</div><div class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Before;</div><div class="line"></div><div class="line"><span class="meta">@Aspect</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyBook</span> </span>&#123;</div><div class="line">	<span class="comment">//在方法上面使用注解完成增强配置</span></div><div class="line">	<span class="meta">@Before</span>(value=<span class="string">"execution(* cn.itcast.aop.Book.*(..))"</span>)</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before1</span><span class="params">()</span> </span>&#123;</div><div class="line">		System.out.println(<span class="string">"before.............."</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> cn.itcast.aop;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.junit.Test;</div><div class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</div><div class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestAop</span> </span>&#123;</div><div class="line">	<span class="meta">@Test</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDemo</span><span class="params">()</span> </span>&#123;</div><div class="line">		ApplicationContext context =</div><div class="line">				<span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"bean3.xml"</span>);</div><div class="line">		Book book = (Book) context.getBean(<span class="string">"book"</span>);</div><div class="line">		book.add();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="log4j"><a href="#log4j" class="headerlink" title="log4j"></a>log4j</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">1 通过log4j可以看到程序运行过程中更详细的信息</div><div class="line">（1）经常使用log4j查看日志</div><div class="line"></div><div class="line">2 使用</div><div class="line">（1）导入log4j的jar包</div><div class="line">（2）复制log4j的配置文件log4j.properties，复制到src下面</div><div class="line"></div><div class="line">3 设置日志级别</div><div class="line">（1）info：看到基本信息</div><div class="line">（2）debug：看到更详细信息</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://patrickphang.github.io/2017/02/08/spring/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Patrick Phang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/casillas.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Patrick's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/02/08/spring/" itemprop="url">
                  Spring（一）
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-02-08T13:45:13+08:00">
                2017-02-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JavaWeb/" itemprop="url" rel="index">
                    <span itemprop="name">JavaWeb</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/02/08/spring/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/02/08/spring/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2017/02/08/spring/" class="leancloud_visitors" data-flag-title="Spring（一）">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="IOC入门案例"><a href="#IOC入门案例" class="headerlink" title="IOC入门案例"></a>IOC入门案例</h1><ol>
<li>导入jar包</li>
<li><p>创建类，在类里面创建方法<code>User.java</code>  </p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> cn.itcast.ioc;</div><div class="line"></div><div class="line"><span class="comment">// 创建类，在类里面创建方法</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</div><div class="line">	<span class="keyword">private</span> String username;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(String username)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.username = username;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">()</span> </span>&#123;    </div><div class="line">        <span class="comment">// 无参构造函数</span></div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">()</span> </span>&#123;</div><div class="line">		System.out.println(<span class="string">"add.........."</span>);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		<span class="comment">//原始做法</span></div><div class="line"><span class="comment">//		User user = new User();</span></div><div class="line"><span class="comment">//		user.add();</span></div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>创建spring配置文件<code>applicationContext.xml</code>，配置创建类</p>
 <figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line">&lt;beans xmlns="http://www.springframework.org/schema/beans"</div><div class="line">    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"</div><div class="line">    xmlns:p="http://www.springframework.org/schema/p"</div><div class="line">    xsi:schemaLocation="</div><div class="line">        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"&gt;</div><div class="line">	&lt;bean id="user" class="cn.itcast.ioc.User"&gt;&lt;/bean&gt;</div><div class="line"></div><div class="line">&lt;/beans&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>写代码测试对象创建</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> cn.itcast.ioc;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.junit.Test;</div><div class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</div><div class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestIOC</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="meta">@Test</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testUser</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="comment">//1 加载spring配置文件，根据创建对象</span></div><div class="line">		ApplicationContext context =</div><div class="line">				<span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"bean1.xml"</span>);</div><div class="line">		<span class="comment">//2 得到配置创建的对象</span></div><div class="line">		UserService userService = (UserService) context.getBean(<span class="string">"userService"</span>);</div><div class="line">		userService.add();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="bean管理"><a href="#bean管理" class="headerlink" title="bean管理"></a>bean管理</h1><p>bean实例化的三种方式：使用类的无参构造创建（重点）、使用静态工厂创建、使用实例工厂创建</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">()</span> </span>&#123;    </div><div class="line">    <span class="comment">// 无参构造函数</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="Bean标签常用属性"><a href="#Bean标签常用属性" class="headerlink" title="Bean标签常用属性"></a>Bean标签常用属性</h1><ol>
<li>id属性</li>
<li>class属性</li>
<li>name属性</li>
<li>scope属性  -singleton：默认值，单例   -prototype：多例   -request   -session   -globalSession</li>
</ol>
<h1 id="属性注入"><a href="#属性注入" class="headerlink" title="属性注入"></a>属性注入</h1><p>创建对象时候，向类里面属性里面设置值  </p>
<ol>
<li><p>使用set方法注入  </p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> cn.itcast.property;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Book</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="keyword">private</span> String bookname;</div><div class="line">	<span class="comment">//set方法</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBookname</span><span class="params">(String bookname)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.bookname = bookname;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">demobook</span><span class="params">()</span> </span>&#123;</div><div class="line">		System.out.println(<span class="string">"book..........."</span>+bookname);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;!-- 使用set方法注入属性 --&gt;</div><div class="line">&lt;!-- &lt;bean id=&quot;book&quot; class=&quot;cn.itcast.property.Book&quot;&gt; --&gt;</div><div class="line">    &lt;!-- 注入属性值</div><div class="line">        name属性值：类里面定义的属性名称</div><div class="line">        value属性：设置具体的值</div><div class="line">    --&gt;</div><div class="line">    &lt;!-- &lt;property name=&quot;bookname&quot; value=&quot;易筋经&quot;&gt;&lt;/property&gt;</div><div class="line">&lt;/bean&gt; --&gt;</div></pre></td></tr></table></figure>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> cn.itcast.property;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.junit.Test;</div><div class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</div><div class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestIOC</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="meta">@Test</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testUser</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="comment">//1 加载spring配置文件，根据创建对象</span></div><div class="line">		ApplicationContext context =</div><div class="line">				<span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"bean1.xml"</span>);</div><div class="line">		<span class="comment">//2 得到配置创建的对象</span></div><div class="line">		Book book = (Book) context.getBean(<span class="string">"book"</span>);</div><div class="line">		person.demobook();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>使用有参数构造注入  </p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> cn.itcast.property;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PropertyDemo1</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="keyword">private</span> String username;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">PropertyDemo1</span><span class="params">(String username)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.username = username;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span> </span>&#123;</div><div class="line">		System.out.println(<span class="string">"demo1.........."</span>+username);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;!-- 使用有参数构造注入属性 --&gt;</div><div class="line">&lt;!-- &lt;bean id=&quot;demo&quot; class=&quot;cn.itcast.property.PropertyDemo1&quot;&gt; --&gt;</div><div class="line">    &lt;!-- 使用有参构造注入 --&gt;</div><div class="line">    &lt;!-- &lt;constructor-arg name=&quot;username&quot; value=&quot;小王小马&quot;&gt;&lt;/constructor-arg&gt;</div><div class="line">&lt;/bean&gt; --&gt;</div></pre></td></tr></table></figure>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> cn.itcast.property;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.junit.Test;</div><div class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</div><div class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestIOC</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="meta">@Test</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testUser</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="comment">//1 加载spring配置文件，根据创建对象</span></div><div class="line">		ApplicationContext context =</div><div class="line">				<span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"bean1.xml"</span>);</div><div class="line">		<span class="comment">//2 得到配置创建的对象</span></div><div class="line">		PropertyDemo1 demo1 = (PropertyDemo1) context.getBean(<span class="string">"demo"</span>);</div><div class="line">		demo1.test1();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>使用接口注入  </p>
</li>
</ol>
<h1 id="注入对象类型属性"><a href="#注入对象类型属性" class="headerlink" title="注入对象类型属性"></a>注入对象类型属性</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> cn.itcast.ioc;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDao</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">()</span> </span>&#123;</div><div class="line">		System.out.println(<span class="string">"dao........."</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&lt;!-- 注入对象类型属性 --&gt;</div><div class="line">&lt;!-- 1 配置service和dao对象 --&gt;</div><div class="line">&lt;!-- &lt;bean id=&quot;userDao&quot; class=&quot;cn.itcast.ioc.UserDao&quot;&gt;&lt;/bean&gt; --&gt;</div><div class="line"></div><div class="line">&lt;!-- &lt;bean id=&quot;userService&quot; class=&quot;cn.itcast.ioc.UserService&quot;&gt; --&gt;</div><div class="line">    &lt;!-- 注入dao对象</div><div class="line">        name属性值：service类里面属性名称</div><div class="line">                                               现在不要写value属性，因为刚才是字符串，现在是对象</div><div class="line">        写ref属性：dao配置bean标签中id值</div><div class="line">    --&gt;</div><div class="line">    &lt;!-- &lt;property name=&quot;userDao&quot; ref=&quot;userDao&quot;&gt;&lt;/property&gt;</div><div class="line">&lt;/bean&gt; --&gt;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> cn.itcast.ioc;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserService</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="comment">//1 定义dao类型属性</span></div><div class="line">	<span class="keyword">private</span> UserDao userDao;</div><div class="line">	<span class="comment">//2 生成set方法</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserDao</span><span class="params">(UserDao userDao)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.userDao = userDao;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">()</span> </span>&#123;</div><div class="line">		System.out.println(<span class="string">"service........."</span>);</div><div class="line">		<span class="comment">//在service里面得到dao类对象，才能调用dao里面的方法</span></div><div class="line"><span class="comment">//		UserDao dao = new UserDao();</span></div><div class="line"><span class="comment">//		dao.add();</span></div><div class="line">		userDao.add();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="注入复杂类型属性"><a href="#注入复杂类型属性" class="headerlink" title="注入复杂类型属性"></a>注入复杂类型属性</h1><h1 id="IOC和DI区别"><a href="#IOC和DI区别" class="headerlink" title="IOC和DI区别"></a>IOC和DI区别</h1><ol>
<li>IOC：控制反转，把对象创建交给spring进行配置</li>
<li>DI：依赖注入，向类里面的属性中设置值</li>
<li>关系：依赖注入不能单独存在，需要在IOC基础上完成操作</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://patrickphang.github.io/2017/02/07/视图解析器/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Patrick Phang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/casillas.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Patrick's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/02/07/视图解析器/" itemprop="url">
                  视图解析器
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-02-07T22:20:17+08:00">
                2017-02-07
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JavaWeb/" itemprop="url" rel="index">
                    <span itemprop="name">JavaWeb</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/02/07/视图解析器/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/02/07/视图解析器/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2017/02/07/视图解析器/" class="leancloud_visitors" data-flag-title="视图解析器">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="InternalResourceViewResolver"><a href="#InternalResourceViewResolver" class="headerlink" title="InternalResourceViewResolver"></a>InternalResourceViewResolver</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"prefix"</span> <span class="attr">value</span>=<span class="string">"/WEB-INF/jsp/"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suffix"</span> <span class="attr">value</span>=<span class="string">".jsp"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div></pre></td></tr></table></figure>
<h1 id="FreeMarkerViewResolver"><a href="#FreeMarkerViewResolver" class="headerlink" title="FreeMarkerViewResolver"></a>FreeMarkerViewResolver</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"freemarkerConfig"</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.freemarker.FreeMarkerConfigurer"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"templateLoaderPath"</span> <span class="attr">value</span>=<span class="string">"/WEB-INF/freemarker"</span>/&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"viewResolver"</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.freemarker.FreeMarkerViewResolver"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"cache"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"prefix"</span> <span class="attr">value</span>=<span class="string">""</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suffix"</span> <span class="attr">value</span>=<span class="string">".ftl"</span>/&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div></pre></td></tr></table></figure>
<h1 id="ContentNegotiatingViewResolver"><a href="#ContentNegotiatingViewResolver" class="headerlink" title="ContentNegotiatingViewResolver"></a>ContentNegotiatingViewResolver</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span> <span class="attr">content-negotiation-manager</span>=<span class="string">"contentNegotiationManager"</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></div><div class="line"><span class="comment">&lt;!--视图解析器3--&gt;</span></div><div class="line"><span class="comment">&lt;!--ContentNegotiatingViewResolver的配置主要分为3个部分，viewResolvers，defaultViews，contentNegotiationManager三个部分。contentNegotiationManager用来配置视图对请求的处理，设置请求的媒体类型，响应方式。defaultContentType用来设置默认的视图，这里我设置的是json,ignoreAcceptHeader用来设置是否要使用报文头来确定请求的类型，favorPathExtension设置是否根据拓展名确定视图类型，这两个我都设置成true。--&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.ContentNegotiatingViewResolver"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"contentNegotiationManager"</span>  <span class="attr">ref</span>=<span class="string">"contentNegotiationManager"</span>/&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"viewResolvers"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">list</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"viewResolver1"</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"order"</span> <span class="attr">value</span>=<span class="string">"1"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"prefix"</span> <span class="attr">value</span>=<span class="string">"/pages/"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suffix"</span> <span class="attr">value</span>=<span class="string">".jsp"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"viewResolver2"</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.freemarker.FreeMarkerViewResolver"</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"cache"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"prefix"</span> <span class="attr">value</span>=<span class="string">""</span>/&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suffix"</span> <span class="attr">value</span>=<span class="string">".ftl"</span>/&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"beanNameViewResolver"</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.BeanNameViewResolver"</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"order"</span> <span class="attr">value</span>=<span class="string">"2"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">list</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"defaultViews"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">list</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.json.MappingJackson2JsonView"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.xml.MarshallingView"</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">constructor-arg</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.oxm.xstream.XStreamMarshaller"</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"classesToBeBound"</span>&gt;</span></div><div class="line">                            <span class="tag">&lt;<span class="name">list</span>&gt;</span></div><div class="line">                                <span class="tag">&lt;<span class="name">value</span>&gt;</span>com.model.User<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">                            <span class="tag">&lt;/<span class="name">list</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">list</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"contentNegotiationManager"</span>  <span class="attr">class</span>=<span class="string">"org.springframework.web.accept.ContentNegotiationManagerFactoryBean"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"order"</span> <span class="attr">value</span>=<span class="string">"1"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"favorParameter"</span> <span class="attr">value</span>=<span class="string">"false"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"ignoreAcceptHeader"</span> <span class="attr">value</span>=<span class="string">"true"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"defaultContentType"</span> <span class="attr">value</span>=<span class="string">"text/html"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"mediaTypes"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">map</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"json"</span> <span class="attr">value</span>=<span class="string">"application/json"</span> /&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"xml"</span> <span class="attr">value</span>=<span class="string">"application/xml"</span> /&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"htm"</span> <span class="attr">value</span>=<span class="string">"application/json"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">map</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://patrickphang.github.io/2017/02/07/SpringMVC（二）/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Patrick Phang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/casillas.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Patrick's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/02/07/SpringMVC（二）/" itemprop="url">
                  SpringMVC（二）
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-02-07T20:14:15+08:00">
                2017-02-07
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JavaWeb/" itemprop="url" rel="index">
                    <span itemprop="name">JavaWeb</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/02/07/SpringMVC（二）/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/02/07/SpringMVC（二）/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2017/02/07/SpringMVC（二）/" class="leancloud_visitors" data-flag-title="SpringMVC（二）">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="数据回显"><a href="#数据回显" class="headerlink" title="数据回显"></a>数据回显</h1><h2 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h2><p>表单提交出现错误，重新回到表单，用户重新填写数据，刚才提交的参数在页面上回显。</p>
<h2 id="对简单类型的数据回显"><a href="#对简单类型的数据回显" class="headerlink" title="对简单类型的数据回显"></a>对简单类型的数据回显</h2><p>对商品修改数据回显：<br>注意在进入修改页面的controller方法中和提交修改商品信息方法model.addAttribute方法设置的key一致。</p>
<p>修改商品显示方法：<br><code>ItemsController.java</code><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@RequestMapping</span>(value=<span class="string">"/editItems"</span>,method=&#123;RequestMethod.GET&#125;)</div><div class="line"><span class="function"><span class="keyword">public</span> String <span class="title">editItems</span><span class="params">(Model model, Integer id)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">    <span class="comment">// 将id传到页面</span></div><div class="line">    model.addAttribute(<span class="string">"id"</span>, id);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>修改商品页面：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;form id=<span class="string">"itemForm"</span> action=<span class="string">"$&#123;pageContext.request.contextPath &#125;/items/editItemSubmit.action"</span> method=<span class="string">"post"</span> enctype=<span class="string">"multipart/form-data"</span>&gt;</div><div class="line"><span class="xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">value</span>=<span class="string">"$&#123; id &#125;"</span>/&gt;</span></span></div></pre></td></tr></table></figure></p>
<p>修改商品提交方法：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/editItemSubmit"</span>)</div><div class="line"><span class="function"><span class="keyword">public</span> String <span class="title">editItemSubmit</span><span class="params">(Model model, Integer id)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">    <span class="comment">// 进行数据回显</span></div><div class="line">    model.addAttribute(<span class="string">"id"</span>, id);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="pojo类型数据回显"><a href="#pojo类型数据回显" class="headerlink" title="pojo类型数据回显"></a>pojo类型数据回显</h2><p>方法一：使用<code>Model.addtribute</code>方法进行数据回显<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/editItemSubmit"</span>)</div><div class="line"><span class="function"><span class="keyword">public</span> String <span class="title">editItemSubmit</span><span class="params">(Model model, Integer id, ItemsCustom itemsCustom)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">    <span class="comment">// 进行数据回显</span></div><div class="line">    model.addAttribute(<span class="string">"item"</span>, itemsCustom);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>方法二：使用<code>@ModelAttribute</code>，作用于将请求pojo数据放到Model中回显到页面<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> String <span class="title">editItemSubmit</span><span class="params">(Model model, Integer id, @ModelAttribute(value=<span class="string">"itemsCustom"</span>)</span> ItemsCustom itemsCustom) <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">    model.addAttribute(<span class="string">"item"</span>, itemsCustom);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>在ModelAttribute方法指定的名称就是要填充Model中的key，在页面中就要通过key取数据。</p>
<p><code>@ModelAttribute</code>将方法返回值传到页面</p>
<h1 id="参数绑定集合类型"><a href="#参数绑定集合类型" class="headerlink" title="参数绑定集合类型"></a>参数绑定集合类型</h1><h2 id="绑定数组"><a href="#绑定数组" class="headerlink" title="绑定数组"></a>绑定数组</h2><p>需求：在商品查询列表页面，用户选择要删除的商品，批量删除商品。<br>在controller方法中如何将批量提交的数据绑定成数组类型。</p>
<ol>
<li><p>页面定义<br> <code>itemsList.jsp</code></p>
 <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"></span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">deleteItems</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	<span class="comment">//将form的action指向删除商品的地址</span></div><div class="line">	<span class="built_in">document</span>.itemsForm.action=<span class="string">"$&#123;pageContext.request.contextPath &#125;/items/deleteItems.action"</span>;</div><div class="line">	<span class="comment">//进行form提交</span></div><div class="line">	<span class="built_in">document</span>.itemsForm.submit();</div><div class="line">&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">当前用户：$&#123;usercode &#125;  </div><div class="line"><span class="tag">&lt;<span class="name">c:if</span> <span class="attr">test</span>=<span class="string">"$&#123; usercode!=null &#125;"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"$&#123; pageContext.request.contextPath &#125;/logout.action"</span>&gt;</span>退出<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">c:if</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">name</span>=<span class="string">"itemsForm"</span> <span class="attr">action</span>=<span class="string">"$&#123; pageContext.request.contextPath &#125;/items/queryItem.action"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></div><div class="line">查询条件：</div><div class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">width</span>=<span class="string">"100%"</span> <span class="attr">border</span>=<span class="string">1</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span></div><div class="line">商品类别：</div><div class="line"><span class="tag">&lt;<span class="name">select</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">c:forEach</span> <span class="attr">items</span>=<span class="string">"$&#123;itemsType &#125;"</span> <span class="attr">var</span>=<span class="string">"item"</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"$&#123;item.key &#125;"</span>&gt;</span>$&#123;item.value &#125;<span class="tag">&lt;/<span class="name">option</span>&gt;</span></div><div class="line"></div><div class="line">	<span class="tag">&lt;/<span class="name">c:forEach</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"查询"</span>/&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"批量删除"</span> <span class="attr">onclick</span>=<span class="string">"deleteItems()"</span>/&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></div><div class="line">商品列表：</div><div class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">width</span>=<span class="string">"100%"</span> <span class="attr">border</span>=<span class="string">1</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">td</span>&gt;</span>选择<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">td</span>&gt;</span>商品名称<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">td</span>&gt;</span>商品价格<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">td</span>&gt;</span>生产日期<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">td</span>&gt;</span>商品描述<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">td</span>&gt;</span>操作<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">td</span>&gt;</span>rest连接<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">c:forEach</span> <span class="attr">items</span>=<span class="string">"$&#123;itemsList &#125;"</span> <span class="attr">var</span>=<span class="string">"item"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"delete_id"</span> <span class="attr">value</span>=<span class="string">"$&#123;item.id&#125;"</span> /&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;item.name &#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;item.price &#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">fmt:formatDate</span> <span class="attr">value</span>=<span class="string">"$&#123;item.createtime&#125;"</span> <span class="attr">pattern</span>=<span class="string">"yyyy-MM-dd HH:mm:ss"</span>/&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;item.detail &#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line"></div><div class="line">	<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"$&#123;pageContext.request.contextPath &#125;/items/editItems.action?id=$&#123;item.id&#125;"</span>&gt;</span>修改<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"$&#123;pageContext.request.contextPath &#125;/items/viewItems/$&#123;item.id&#125;"</span>&gt;</span>商品查看<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">c:forEach</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>controller方法定义<br> <code>ItemsController.java</code></p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//删除 商品</span></div><div class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/deleteItems"</span>)</div><div class="line"><span class="function"><span class="keyword">public</span> String <span class="title">deleteItems</span><span class="params">(Integer[] delete_id)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">    <span class="comment">//调用service方法删除 商品</span></div><div class="line">    <span class="comment">//....</span></div><div class="line">    <span class="keyword">return</span> <span class="string">"success"</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="绑定List"><a href="#绑定List" class="headerlink" title="绑定List"></a>绑定List<object></object></h2><p>需求：批量修改商品信息提交。<br>先进入批量修改商品页面，填写信息，点击提交。</p>
<ol>
<li><p>页面定义<br> <code>itemsList.jsp</code></p>
 <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>批量修改商品查询<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"></span></div><div class="line"><span class="comment">//修改商品提交</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateItems</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	<span class="comment">//将form的action指向删除商品的地址</span></div><div class="line">	<span class="built_in">document</span>.itemsForm.action=<span class="string">"$&#123;pageContext.request.contextPath &#125;/items/editItemsListSubmit.action"</span>;</div><div class="line">	<span class="comment">//进行form提交</span></div><div class="line">	<span class="built_in">document</span>.itemsForm.submit();</div><div class="line">&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">name</span>=<span class="string">"itemsForm"</span> <span class="attr">action</span>=<span class="string">"$&#123;pageContext.request.contextPath &#125;/items/queryItem.action"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></div><div class="line">查询条件：</div><div class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">width</span>=<span class="string">"100%"</span> <span class="attr">border</span>=<span class="string">1</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span></div><div class="line">商品类别：</div><div class="line"><span class="tag">&lt;<span class="name">select</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">c:forEach</span> <span class="attr">items</span>=<span class="string">"$&#123;itemsType &#125;"</span> <span class="attr">var</span>=<span class="string">"item"</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"$&#123;item.key &#125;"</span>&gt;</span>$&#123;item.value &#125;<span class="tag">&lt;/<span class="name">option</span>&gt;</span></div><div class="line"></div><div class="line">	<span class="tag">&lt;/<span class="name">c:forEach</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"查询"</span>/&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"批量修改提交"</span> <span class="attr">onclick</span>=<span class="string">"updateItems()"</span>/&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></div><div class="line">商品列表：</div><div class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">width</span>=<span class="string">"100%"</span> <span class="attr">border</span>=<span class="string">1</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">td</span>&gt;</span>商品名称<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">td</span>&gt;</span>商品价格<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">td</span>&gt;</span>生产日期<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">td</span>&gt;</span>商品描述<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">td</span>&gt;</span>操作<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">c:forEach</span> <span class="attr">items</span>=<span class="string">"$&#123;itemsList &#125;"</span> <span class="attr">var</span>=<span class="string">"item"</span> <span class="attr">varStatus</span>=<span class="string">"s"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"itemsList[$&#123;s.index &#125;].name"</span> <span class="attr">value</span>=<span class="string">"$&#123;item.name &#125;"</span>/&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"itemsList[$&#123;s.index &#125;].price"</span> <span class="attr">value</span>=<span class="string">"$&#123;item.price &#125;"</span>/&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">fmt:formatDate</span> <span class="attr">value</span>=<span class="string">"$&#123; item.createtime&#125;"</span> <span class="attr">pattern</span>=<span class="string">"yyyy-MM-dd HH:mm:ss"</span>/&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123; item.detail &#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line"></div><div class="line">	<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"$&#123; pageContext.request.contextPath &#125;/items/editItems.action?id=$&#123;item.id&#125;"</span>&gt;</span>修改<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">c:forEach</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>controller方法定义<br> <code>ItemsController.java</code></p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//批量修改商品查询</span></div><div class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/editItemsList"</span>)</div><div class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">editItemsList</span><span class="params">(HttpServletRequest request)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">    System.out.println(request.getParameter(<span class="string">"id"</span>));</div><div class="line">    <span class="comment">//调用service查询商品列表</span></div><div class="line">    List&lt;ItemsCustom&gt; itemsList = itemsService.findItemsList(<span class="keyword">null</span>);</div><div class="line"></div><div class="line">    ModelAndView modelAndView = <span class="keyword">new</span> ModelAndView();</div><div class="line">    modelAndView.addObject(<span class="string">"itemsList"</span>, itemsList);</div><div class="line">    <span class="comment">// 指定逻辑视图名</span></div><div class="line">    modelAndView.setViewName(<span class="string">"editItemsList"</span>);</div><div class="line"></div><div class="line">    <span class="keyword">return</span> modelAndView;</div><div class="line">&#125;</div><div class="line"><span class="comment">//批量修改商品提交</span></div><div class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/editItemsListSubmit"</span>)</div><div class="line"><span class="function"><span class="keyword">public</span> String <span class="title">editItemsListSubmit</span><span class="params">(ItemsQueryVo itemsQueryVo)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="string">"success"</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
 <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">c:forEach</span> <span class="attr">items</span>=<span class="string">"$&#123;itemsList &#125;"</span> <span class="attr">var</span>=<span class="string">"item"</span> <span class="attr">varStatus</span>=<span class="string">"s"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"itemsList[$&#123;s.index &#125;].name"</span> <span class="attr">value</span>=<span class="string">"$&#123;item.name &#125;"</span>/&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"itemsList[$&#123;s.index &#125;].price"</span> <span class="attr">value</span>=<span class="string">"$&#123;item.price &#125;"</span>/&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></div></pre></td></tr></table></figure>
<p> 注释：<br> <code>itemsList</code>：controller方法形参包装类型中list的属性名。<br> <code>itemsList[0]</code>或<code>itemsList[1]</code>…：[]中是序号，从0开始。<br> <code>itemsList[].name</code>：name就是controller方法形参包装类型中list中pojo的属性名<br> <img src="http://i1.piimg.com/567571/ee0b0d2398ab9e0b.png" alt=""></p>
</li>
<li><p>在包装类型里定义一个list<br> <code>ItemsQueryVo.java</code></p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ItemsQueryVo</span> </span>&#123;</div><div class="line">    <span class="comment">//商品信息</span></div><div class="line">    <span class="keyword">private</span> ItemsCustom itemsCustom;</div><div class="line">    <span class="comment">//定义一个list</span></div><div class="line">	<span class="keyword">private</span> List&lt;ItemsCustom&gt; itemsList;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="springmvc和struts的区别"><a href="#springmvc和struts的区别" class="headerlink" title="springmvc和struts的区别"></a>springmvc和struts的区别</h1><p>springmvc是通过方法的形参接收参数，在使用时可以以单例方式使用，建议使用单例。<br>struts是通过成员变量接收参数，在使用时必须以多例方式使用。  </p>
<p>springmvc是基于方法开发，struts基于类开发。<br>springmvc将一个请求的Method和Handler进行关联绑定，一个method对应一个Handler。  </p>
<p>springmvc开发以方法为单位进行开发，方法更帖进service(业务方法)。  </p>
<p>经过实际测试，发现struts标签解析速度比较慢，建议在实际开发时使用jstl。  </p>
<h1 id="图片上传"><a href="#图片上传" class="headerlink" title="图片上传"></a>图片上传</h1><h2 id="需求-1"><a href="#需求-1" class="headerlink" title="需求"></a>需求</h2><p>在商品修改页面，增加图片上传的功能。<br>操作流程：<br>    用户进入商品修改页面<br>    上传图片<br>    点击提交（提交的是图片和商品信息）<br>    再次进入修改页面，图片在商品修改页面展示  </p>
<h2 id="图片存储问题"><a href="#图片存储问题" class="headerlink" title="图片存储问题"></a>图片存储问题</h2><p>切记：不要把图片上传到工程目录 ，不方便进行工程维护。<br>实际电商项目中使用专门图片服务器(http，比如apache、tomcat)。  </p>
<p>本教程使用图片虚拟目录，通过虚拟目录 访问硬盘上存储的图片目录。  </p>
<p>虚拟目录设置：  </p>
<p>注意：图片目录中尽量进行目录分级存储，提高访问速度（提交i/o）。</p>
<h2 id="配置图片上传解析器"><a href="#配置图片上传解析器" class="headerlink" title="配置图片上传解析器"></a>配置图片上传解析器</h2><p>springmvc使用<code>commons-fileupload</code>进行图片上传。commons-fileupload对应的springmvc的图片上传解析器：<code>org.springframework.web.multipart.commons.CommonsMultipartResolver</code><br><code>springmvc.xml</code><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- 文件上传 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"multipartResolver"</span></span></div><div class="line">    <span class="attr">class</span>=<span class="string">"org.springframework.web.multipart.commons.CommonsMultipartResolver"</span>&gt;</div><div class="line">    <span class="comment">&lt;!-- 设置上传文件的最大尺寸为5MB --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxUploadSize"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>5242880<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>加入commons-fileupload的jar包：<code>commons-fileupload-1.3.2.jar</code>和<code>commons-io-2.5.jar</code></p>
<h2 id="编写上传图片的页面"><a href="#编写上传图片的页面" class="headerlink" title="编写上传图片的页面"></a>编写上传图片的页面</h2><p><code>editItem.jsp</code><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">td</span>&gt;</span>商品图片<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">td</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">c:if</span> <span class="attr">test</span>=<span class="string">"$&#123;itemsCustom.pic !=null&#125;"</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"/pic/$&#123;itemsCustom.pic&#125;"</span> <span class="attr">width</span>=<span class="string">100</span> <span class="attr">height</span>=<span class="string">100/</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">br</span>/&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">c:if</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span>  <span class="attr">name</span>=<span class="string">"pictureFile"</span>/&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h2 id="编写controller方法"><a href="#编写controller方法" class="headerlink" title="编写controller方法"></a>编写controller方法</h2><p><code>ItemsController.java</code><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/editItemSubmit"</span>)</div><div class="line"><span class="function"><span class="keyword">public</span> String <span class="title">editItemSubmit</span><span class="params">(Model model,Integer id,</span></span></div><div class="line">            @ModelAttribute(value=<span class="string">"itemsCustom"</span>) ItemsCustom itemsCustom,</div><div class="line">        <span class="comment">//上传图片</span></div><div class="line">        MultipartFile pictureFile</div><div class="line">        ) <span class="keyword">throws</span> Exception &#123;</div><div class="line">        <span class="comment">//进行数据回显</span></div><div class="line">    	model.addAttribute(<span class="string">"id"</span>, id);</div><div class="line"></div><div class="line">    	<span class="comment">//进行图片上传</span></div><div class="line">    	<span class="keyword">if</span>(pictureFile!=<span class="keyword">null</span> &amp;&amp; pictureFile.getOriginalFilename()!=<span class="keyword">null</span> &amp;&amp; pictureFile.getOriginalFilename().length()&gt;<span class="number">0</span>)&#123;</div><div class="line">    		<span class="comment">//图片上传成功后，将图片的地址写到数据库</span></div><div class="line">    		String filePath = <span class="string">"F:\\develop\\upload\\temp\\"</span>;</div><div class="line">    		<span class="comment">//上传文件原始名称</span></div><div class="line">    		String originalFilename = pictureFile.getOriginalFilename();</div><div class="line">    		<span class="comment">//新的图片名称</span></div><div class="line">    		String newFileName = UUID.randomUUID() + originalFilename.substring(originalFilename.lastIndexOf(<span class="string">"."</span>));</div><div class="line">    		<span class="comment">//新文件</span></div><div class="line">    		File file = <span class="keyword">new</span> java.io.File(filePath+newFileName);</div><div class="line"></div><div class="line">    		<span class="comment">//将内存中的文件写入磁盘</span></div><div class="line">    		pictureFile.transferTo(file);</div><div class="line"></div><div class="line">    		<span class="comment">//图片上传成功，将新图片地址写入数据库</span></div><div class="line">    		itemsCustom.setPic(newFileName);</div><div class="line">    	&#125;</div></pre></td></tr></table></figure></p>
<h1 id="json数据的交互"><a href="#json数据的交互" class="headerlink" title="json数据的交互"></a>json数据的交互</h1><h2 id="需求-2"><a href="#需求-2" class="headerlink" title="需求"></a>需求</h2><p>json数据格式是比较简单容易理解，json数据格式常用于远程接口传输，http传输json数据，非常方便页面进行提交/请求结果解析，对json数据的解析。</p>
<h2 id="springmvc解析json加入json解析包"><a href="#springmvc解析json加入json解析包" class="headerlink" title="springmvc解析json加入json解析包"></a>springmvc解析json加入json解析包</h2><p>Springmvc默认用<code>MappingJacksonHttpMessageConverter</code>对json数据进行转换，需要加入jackson的包，如下：<br><code>jackson-core-asl-1.9.13.jar</code><br><code>jackson-mapper-asl-1.9.13.jar</code></p>
<h2 id="在处理器适配器中注入MappingJacksonHttpMessageConverter"><a href="#在处理器适配器中注入MappingJacksonHttpMessageConverter" class="headerlink" title="在处理器适配器中注入MappingJacksonHttpMessageConverter"></a>在处理器适配器中注入MappingJacksonHttpMessageConverter</h2><p>让<code>处理器适配器</code>支持json数据解析，需要注入<code>MappingJacksonHttpMessageConverter</code>。<br><code>springmvc.xml</code><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- 注解适配器 --&gt;</span></div><div class="line"><span class="comment">&lt;!-- 加入 json数据的消息转换器 MappingJacksonHttpMessageConverter依赖Jackson的包 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"messageConverters"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">list</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">bean</span></span></div><div class="line">            <span class="attr">class</span>=<span class="string">"org.springframework.http.converter.json.MappingJacksonHttpMessageConverter"</span>&gt;<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">list</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h2 id="RequestBody和-ResponseBody"><a href="#RequestBody和-ResponseBody" class="headerlink" title="@RequestBody和@ResponseBody"></a>@RequestBody和@ResponseBody</h2><p><code>@RequestBody</code>：将请求的json数据转成java对象<br><code>@ResponseBody</code>：将java对象转成json数据输出。<br><img src="http://i1.piimg.com/567571/c5ed1081d6f3358c.jpg" alt=""></p>
<h2 id="请求json响应json"><a href="#请求json响应json" class="headerlink" title="请求json响应json"></a>请求json响应json</h2><p>controller方法：<br><code>JsonTest.java</code><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Controller</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JsonTest</span> </span>&#123;</div><div class="line">    <span class="comment">//请求的json响应json，请求商品信息，商品信息用json格式，输出商品信息</span></div><div class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/requestJson"</span>)</div><div class="line">    <span class="keyword">public</span> <span class="meta">@ResponseBody</span> <span class="function">ItemsCustom <span class="title">requestJson</span><span class="params">(@RequestBody ItemsCustom itemsCustom)</span> <span class="keyword">throws</span> Exception</span>&#123;</div><div class="line">    	<span class="keyword">return</span> itemsCustom;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>页面：<br><code>JsonTest.jsp</code><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">language</span>=<span class="string">"java"</span> <span class="attr">contentType</span>=<span class="string">"text/html; charset=UTF-8"</span></span></div><div class="line">    <span class="attr">pageEncoding</span>=<span class="string">"UTF-8"</span>%&gt;</div><div class="line"><span class="meta">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=UTF-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>json测试<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"$&#123;pageContext.request.contextPath &#125;/js/jquery-1.4.4.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="comment">//请求json响应json</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">requestJson</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    	$.ajax(&#123;</div><div class="line">    		<span class="attr">url</span>:<span class="string">"$&#123;pageContext.request.contextPath &#125;/requestJson.action"</span>,</div><div class="line">    		<span class="attr">type</span>:<span class="string">"post"</span>,</div><div class="line">    		<span class="attr">contentType</span>:<span class="string">"application/json;charset=utf-8"</span>,</div><div class="line">    		<span class="comment">//请求json数据,使用json表示商品信息</span></div><div class="line">    		data:<span class="string">'&#123;"name":"手机","price":1999&#125;'</span>,</div><div class="line">    		<span class="attr">success</span>:<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</div><div class="line">    			alert(data.name);</div><div class="line">    		&#125;</div><div class="line">    	&#125;);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//请求key/value响应json</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">responseJson</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    	$.ajax(&#123;</div><div class="line">    		<span class="attr">url</span>:<span class="string">"$&#123;pageContext.request.contextPath &#125;/responseJson.action"</span>,</div><div class="line">    		<span class="attr">type</span>:<span class="string">"post"</span>,</div><div class="line">    		<span class="comment">//请求key/value数据</span></div><div class="line">    		data:<span class="string">"name=手机&amp;price=1999"</span>,</div><div class="line">    		<span class="attr">success</span>:<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</div><div class="line">    			alert(data.name);</div><div class="line">    		&#125;</div><div class="line">    	&#125;);</div><div class="line">    &#125;</div><div class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"请求json响应json"</span> <span class="attr">onclick</span>=<span class="string">"requestJson()"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"请求key/value响应json"</span> <span class="attr">onclick</span>=<span class="string">"responseJson()"</span>/&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>测试跟踪：<br><img src="http://p1.bpimg.com/567571/dd07ad24c143fdad.png" alt=""></p>
<h2 id="请求key-value响应json"><a href="#请求key-value响应json" class="headerlink" title="请求key/value响应json"></a>请求key/value响应json</h2><p>controller方法：<br><code>JsonTest.java</code><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Controller</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JsonTest</span> </span>&#123;</div><div class="line">    <span class="comment">//请求key/value响应json</span></div><div class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/responseJson"</span>)</div><div class="line">    <span class="keyword">public</span> <span class="meta">@ResponseBody</span> <span class="function">ItemsCustom <span class="title">responseJson</span><span class="params">(ItemsCustom itemsCustom)</span> <span class="keyword">throws</span> Exception</span>&#123;</div><div class="line">        <span class="keyword">return</span> itemsCustom;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>测试跟踪：<br><img src="http://i1.piimg.com/567571/1121094aec7e6ee8.png" alt=""></p>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>如果前端处理没有特殊要求，<code>建议使用第二种</code>，请求<code>key/value</code>，响应<code>json</code>，方便客户端解析请求结果。</p>
<h1 id="validation校验（了解）"><a href="#validation校验（了解）" class="headerlink" title="validation校验（了解）"></a>validation校验（了解）</h1><h1 id="统一异常处理"><a href="#统一异常处理" class="headerlink" title="统一异常处理"></a>统一异常处理</h1><p>要在一个统一异常处理的类中要处理系统抛出的所有异常，根据异常类型来处理。</p>
<p>统一异常处理的类是什么？</p>
<p>前端控制器DispatcherServlet在进行HandlerMapping、调用HandlerAdapter执行Handler过程中，如果遇到异常，进行异常处理。</p>
<p>在系统中自定义统一的异常处理器，写系统自己的异常处理代码。</p>
<ol>
<li><p>定义统一异常处理器类<br> 统一异常处理器实现<code>HandlerExceptionResolver</code>接口。<br> <code>CustomException.java</code></p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> cn.itcast.ssm.exception;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomException</span> <span class="keyword">extends</span> <span class="title">Exception</span> </span>&#123;</div><div class="line">	<span class="comment">//异常信息</span></div><div class="line">	<span class="keyword">private</span> String message;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">CustomException</span><span class="params">(String message)</span></span>&#123;</div><div class="line">		<span class="keyword">super</span>(message);</div><div class="line">		<span class="keyword">this</span>.message = message;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getMessage</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> message;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMessage</span><span class="params">(String message)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.message = message;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p> <code>CustomExceptionResolver.java</code></p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomExceptionResolver</span> <span class="keyword">implements</span> <span class="title">HandlerExceptionResolver</span>  </span>&#123;</div><div class="line">	<span class="comment">//前端控制器DispatcherServlet在进行HandlerMapping、调用HandlerAdapter执行Handler过程中，如果遇到异常就会执行此方法</span></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> ModelAndView <span class="title">resolveException</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> </span>&#123;</div><div class="line">		<span class="comment">//输出异常</span></div><div class="line">		ex.printStackTrace();</div><div class="line">		<span class="comment">//统一异常处理代码</span></div><div class="line">		<span class="comment">//......</span></div><div class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>配置统一异常处理器<br> <code>springmvc.xml</code></p>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- 定义统一异常处理器 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"cn.itcast.ssm.exception.CustomExceptionResolver"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>异常处理逻辑<br>根据不同的异常类型进行异常处理。</p>
</li>
</ol>
<p>系统自定义的异常类是<code>CustomException</code> ，在<code>controller</code>方法中、<code>service</code>方法中手动抛出此类异常。</p>
<p>针对系统自定义的<code>CustomException</code>异常，就可以直接从异常类中获取异常信息，将异常处理在错误页面展示。<br>针对<code>非CustomException</code>异常，对这类重新构造成一个<code>CustomException</code>，异常信息为“未知错误”，此类错误需要在系统测试阶段去排除。</p>
<p>在统一异常处理器CustomExceptionResolver中实现上边的逻辑。<br>    <code>CustomExceptionResolver.java</code><br>    <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomExceptionResolver</span> <span class="keyword">implements</span> <span class="title">HandlerExceptionResolver</span>  </span>&#123;</div><div class="line">	<span class="comment">//前端控制器DispatcherServlet在进行HandlerMapping、调用HandlerAdapter执行Handler过程中，如果遇到异常就会执行此方法</span></div><div class="line">	<span class="comment">//handler最终要执行的Handler，它的真实身份是HandlerMethod</span></div><div class="line">	<span class="comment">//Exception ex就是接收到异常信息</span></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> ModelAndView <span class="title">resolveException</span><span class="params">(HttpServletRequest request,</span></span></div><div class="line">			HttpServletResponse response, Object handler, Exception ex) &#123;</div><div class="line">		<span class="comment">//输出异常</span></div><div class="line">		ex.printStackTrace();</div><div class="line"></div><div class="line">		<span class="comment">//统一异常处理代码</span></div><div class="line">		<span class="comment">// 1.针对系统自定义的CustomException异常，就可以直接从异常类中获取异常信息，将异常处理在错误页面展示</span></div><div class="line">		<span class="comment">//异常信息</span></div><div class="line">		String message = <span class="keyword">null</span>;</div><div class="line">		CustomException customException = <span class="keyword">null</span>;</div><div class="line">		<span class="comment">//如果ex是系统自定义的异常，直接取出异常信息</span></div><div class="line">		<span class="keyword">if</span>(ex <span class="keyword">instanceof</span> CustomException)&#123;</div><div class="line">			customException = (CustomException)ex;</div><div class="line">		&#125; <span class="keyword">else</span>&#123;</div><div class="line">			<span class="comment">// 2.针对非CustomException异常，对这类重新构造成一个CustomException，异常信息为“未知错误”</span></div><div class="line">			customException = <span class="keyword">new</span> CustomException(<span class="string">"未知错误"</span>);</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="comment">//错误信息</span></div><div class="line">		message = customException.getMessage();</div><div class="line">		request.setAttribute(<span class="string">"message"</span>, message);</div><div class="line">		<span class="keyword">try</span> &#123;</div><div class="line">			<span class="comment">//转向到错误页面</span></div><div class="line">			request.getRequestDispatcher(<span class="string">"/WEB-INF/jsp/error.jsp"</span>).forward(request, response);</div><div class="line">		&#125; <span class="keyword">catch</span> (ServletException e) &#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">new</span> ModelAndView();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<ol>
<li><p>测试抛出异常由统一异常处理器捕获<br> 可以在controller方法、service方法、dao实现类中抛出异常，要求dao、service、controller遇到异常全部向上抛出异常，方法向上抛出异常throws Exception<br> <code>ItemsServiceImpl.java</code></p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> cn.itcast.ssm.service.impl;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ItemsServiceImpl</span> <span class="keyword">implements</span> <span class="title">ItemsService</span> </span>&#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> ItemsCustom <span class="title">findItemsById</span><span class="params">(<span class="keyword">int</span> id)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        Items items = itemsMapper.selectByPrimaryKey(id);</div><div class="line">        <span class="comment">//如果查询的商品信息为空，抛出系统自定义的异常</span></div><div class="line">        <span class="keyword">if</span>(items==<span class="keyword">null</span>)&#123;</div><div class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> CustomException(<span class="string">"修改商品信息不存在"</span>);</div><div class="line">        &#125;</div><div class="line">        <span class="comment">//在这里随着需求的变量，需要查询商品的其它的相关信息，返回到controller</span></div><div class="line">        ItemsCustom itemsCustom = <span class="keyword">new</span> ItemsCustom();</div><div class="line">        <span class="comment">//将items的属性拷贝到itemsCustom</span></div><div class="line">        BeanUtils.copyProperties(items, itemsCustom);</div><div class="line"></div><div class="line">        <span class="keyword">return</span> itemsCustom;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p> <code>ItemsController.java</code></p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//方法返回字符串，字符串就是逻辑视图名，Model作用是将数据填充到request域，在页面展示</span></div><div class="line"><span class="meta">@RequestMapping</span>(value=<span class="string">"/editItems"</span>,method=&#123;RequestMethod.GET&#125;)</div><div class="line"><span class="function"><span class="keyword">public</span> String <span class="title">editItems</span><span class="params">(Model model,Integer id)</span><span class="keyword">throws</span> Exception</span>&#123;</div><div class="line">    <span class="comment">//将id传到页面</span></div><div class="line">    model.addAttribute(<span class="string">"id"</span>, id);</div><div class="line"></div><div class="line">    <span class="comment">//调用 service查询商品信息</span></div><div class="line">    ItemsCustom itemsCustom = itemsService.findItemsById(id);</div><div class="line">    <span class="keyword">if</span>(itemsCustom == <span class="keyword">null</span>)&#123;</div><div class="line">        <span class="function"><span class="keyword">throws</span> new <span class="title">CustomException</span><span class="params">(<span class="string">"修改商品信息不存在"</span>)</span></span>;</div><div class="line">    &#125;</div><div class="line">    model.addAttribute(<span class="string">"itemsCustom"</span>, itemsCustom);</div><div class="line"></div><div class="line">    <span class="keyword">return</span> <span class="string">"editItem"</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<p>图解：<br><img src="http://p1.bqimg.com/567571/b2c2de3d9ae41482.jpg" alt=""></p>
<h1 id="RESTful架构"><a href="#RESTful架构" class="headerlink" title="RESTful架构"></a>RESTful架构</h1><h2 id="什么是RESTful"><a href="#什么是RESTful" class="headerlink" title="什么是RESTful"></a>什么是RESTful</h2><p>RESTful软件开发理念，RESTful对http进行非常好的诠释。<br>RESTful即Representational State Transfer的缩写。<br>综合上面的解释，我们总结一下什么是RESTful架构：<br>（1）每一个URI代表一种资源；<br>（2）客户端和服务器之间，传递这种资源的某种表现层；<br>（3）客户端通过四个HTTP动词，对服务器端资源进行操作，实现”表现层状态转化”。  </p>
<h2 id="url的RESTful实现"><a href="#url的RESTful实现" class="headerlink" title="url的RESTful实现"></a>url的RESTful实现</h2><p>非RESTful的http的url：<a href="http://localhost:8080/items/editItems.action?id=1&amp;" target="_blank" rel="external">http://localhost:8080/items/editItems.action?id=1&amp;</a>….</p>
<p>RESTful的url是简洁的：http:// localhost:8080/items/editItems/1<br>参数通过url传递，rest接口返回json数据</p>
<h2 id="需求-3"><a href="#需求-3" class="headerlink" title="需求"></a>需求</h2><p>根据<code>id</code>查看商品信息，商品信息查看的链接使用<code>RESTful</code>方式实现，商品信息以<code>json</code>返回。  </p>
<ol>
<li><p>更改DispatcherServlet配置<br> <code>web.xml</code></p>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- restful的配置 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc_rest<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- 加载springmvc配置 --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></div><div class="line">        <span class="comment">&lt;!-- 配置文件的地址 如果不配置contextConfigLocation， 默认查找的配置文件名称classpath下的：servlet名称+"-serlvet.xml"即：springmvc-serlvet.xml --&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:spring/springmvc.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc_rest<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- rest方式配置为/ --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>参数通过url传递<br> <code>ItemsController.java</code></p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 根据商品id查看商品信息rest接口</span></div><div class="line"><span class="comment">// @RequestMapping中指定restful方式的url中的参数，参数需要用&#123;&#125;包起来</span></div><div class="line"><span class="comment">// @PathVariable将url中的&#123;&#125;包起参数和形参进行绑定</span></div><div class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/viewItems/&#123;id&#125;"</span>)</div><div class="line"><span class="keyword">public</span> <span class="meta">@ResponseBody</span> <span class="function">ItemsCustom <span class="title">viewItems</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span> Integer id) <span class="keyword">throws</span> Exception</span>&#123;</div><div class="line">    <span class="comment">//调用 service查询商品信息</span></div><div class="line">    ItemsCustom itemsCustom = itemsService.findItemsById(id);</div><div class="line">    <span class="keyword">return</span> itemsCustom;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p> <code>itemsList.jsp</code></p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&lt;c:forEach items=<span class="string">"$&#123;itemsList &#125;"</span> <span class="keyword">var</span>=<span class="string">"item"</span>&gt;</div><div class="line">&lt;tr&gt;</div><div class="line">	&lt;td&gt;&lt;input type="checkbox" name="delete_id" value="$&#123;item.id&#125;" /&gt;&lt;/td&gt;</div><div class="line">	&lt;td&gt;$&#123; item.name &#125;&lt;/td&gt;</div><div class="line">	&lt;td&gt;$&#123; item.price &#125;&lt;/td&gt;</div><div class="line">	&lt;td&gt;&lt;fmt:formatDate value="$&#123;item.createtime&#125;" pattern="yyyy-MM-dd HH:mm:ss"/&gt;&lt;/td&gt;</div><div class="line">	&lt;td&gt;$&#123; item.detail &#125;&lt;/td&gt;</div><div class="line"></div><div class="line">	&lt;td&gt;&lt;a href="$&#123;pageContext.request.contextPath &#125;/items/editItems.action?id=$&#123;item.id&#125;"&gt;修改&lt;/a&gt;&lt;/td&gt;</div><div class="line">	&lt;td&gt;&lt;a href="$&#123;pageContext.request.contextPath &#125;/items/viewItems/$&#123;item.id&#125;"&gt;商品查看&lt;/a&gt;&lt;/td&gt;</div><div class="line">&lt;/tr&gt;</div><div class="line">&lt;/c:forEach&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>设置静态资源解析<br> 当DispatcherServlet拦截/开头的所有请求，对静态资源的访问就报错404，需要通过设置对静态资源进行解析.<br> <img src="http://i1.piimg.com/567571/a5056866c3d1742b.png" alt=""><br> <code>springmvc.xml</code></p>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- 静态资源 解析 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">location</span>=<span class="string">"/js/"</span> <span class="attr">mapping</span>=<span class="string">"/js/**"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">location</span>=<span class="string">"/img/"</span> <span class="attr">mapping</span>=<span class="string">"/img/**"</span> /&gt;</span></div></pre></td></tr></table></figure>
<p> 访问<code>/js/**</code>的url从工程下<code>/js/</code>下解析。</p>
</li>
</ol>
<h1 id="springmvc拦截器"><a href="#springmvc拦截器" class="headerlink" title="springmvc拦截器"></a>springmvc拦截器</h1><h2 id="拦截器的异常场合"><a href="#拦截器的异常场合" class="headerlink" title="拦截器的异常场合"></a>拦截器的异常场合</h2><p>用户请求到DispatherServlet中，DispatherServlet调用HandlerMapping查找Handler，HandlerMapping返回一个拦截的链儿（多个拦截），springmvc中的拦截器是通过HandlerMapping发起的。<br>在企业开发，使用拦截器实现用户认证（用户登陆后进行身份校验拦截），用户权限拦截。</p>
<h2 id="springmvc拦截器方法"><a href="#springmvc拦截器方法" class="headerlink" title="springmvc拦截器方法"></a>springmvc拦截器方法</h2><h2 id="测试拦截器"><a href="#测试拦截器" class="headerlink" title="测试拦截器"></a>测试拦截器</h2><h2 id="拦截器应用（用户认证拦截）"><a href="#拦截器应用（用户认证拦截）" class="headerlink" title="拦截器应用（用户认证拦截）"></a>拦截器应用（用户认证拦截）</h2>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>


          
          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/casillas.jpg"
               alt="Patrick Phang" />
          <p class="site-author-name" itemprop="name">Patrick Phang</p>
           
              <p class="site-description motion-element" itemprop="description">PatrickPhang</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">36</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">4</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">5</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/PatrickPhang" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://twitter.com/PatrickYatesy" target="_blank" title="Twitter">
                  
                    <i class="fa fa-fw fa-twitter"></i>
                  
                  Twitter
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/patrickphangcoder" target="_blank" title="Weibo">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  Weibo
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.zhihu.com/people/peng-xiao-ye-93/" target="_blank" title="Zhihu">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  Zhihu
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.jianshu.com/u/62303cbb7c60" target="_blank" title="Jianshu">
                  
                    <i class="fa fa-fw fa-book"></i>
                  
                  Jianshu
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              友情链接
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://cuiqingcai.com/" title="崔庆才" target="_blank">崔庆才</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.jasonsi.com" title="听你" target="_blank">听你</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://wenwenla.github.io/" title="wenwen" target="_blank">wenwen</a>
                </li>
              
            </ul>
          </div>
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2016 - 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Patrick Phang</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


        

<div class="busuanzi-count">

  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">总访问量 <i class="fa fa-user"></i><span class="busuanzi-value" id="busuanzi_value_site_uv"></span></span>
  

  
    <span class="site-pv">访客数 <i class="fa fa-eye"></i><span class="busuanzi-value" id="busuanzi_value_site_pv"></span></span>
  
  
</div>



        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    
    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>

  
  <script type="text/javascript" src="//cdn.bootcss.com/canvas-nest.js/1.0.1/canvas-nest.min.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"patrickphang"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
      
      <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
      <script src="/js/src/hook-duoshuo.js?v=5.1.0"></script>
    
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  













  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("iXNIEVsQbfiNCzOb5lLfN5eF-gzGzoHsz", "Qz2di39iaaqi20J0P9qoUN1f");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  
  
  
  <link rel="stylesheet" href="/lib/algolia-instant-search/instantsearch.min.css">

  
  
  <script src="/lib/algolia-instant-search/instantsearch.min.js"></script>
  

  <script src="/js/src/algolia-search.js?v=5.1.0"></script>



  

</body>
</html>
